<template>
  <div>
    <h1 style="text-align: center">Simulation 3: Verschr√§nkung/EPR</h1>
    <button class="absoluteButton red" id="shootButton" @click="shootElectrons" :disabled="state !== 'initialized'">Cooper-Paar auseinander fliegen lassen</button>
    <button class="absoluteButton" id="spinButton" @click="toggleSpin" :disabled="state === 'animating'">Elektronenspin (theoretisch)
      {{ spinVisible ? 'ausblenden' : 'anzeigen' }}
    </button>
    <div :style="{'visibility': loading ? 'hidden' : 'visible'}">
      <svg id="simulation" ref="simulation" width="100%" height="100%"
           viewBox="0 0 13892 6859" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
           xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">

          <g id="cooperframe"><ellipse id="fill" cx="6871.38" cy="4563.87" rx="1071.38" ry="511.279" style="fill:#e5e5e5;"/><path
            id="frame"
            d="M6871.38,4052.58c591.313,0 1071.38,229.096 1071.38,511.279c0,282.184 -480.07,511.279 -1071.38,511.279c-591.313,0 -1071.38,-229.095 -1071.38,-511.279c-0,-282.183 480.07,-511.279 1071.38,-511.279Zm0,66.804c339.646,0 641.408,77.079 828.113,198.592c107.533,69.987 176.462,152.529 176.462,245.883c-0,93.354 -68.929,175.896 -176.463,245.884c-186.704,121.512 -488.466,198.591 -828.112,198.591c-339.646,0 -641.408,-77.079 -828.113,-198.591c-107.533,-69.988 -176.466,-152.53 -176.466,-245.884c-0,-93.354 68.933,-175.896 176.466,-245.883c186.705,-121.513 488.467,-198.592 828.113,-198.592Z"/></g>
          <rect id="dropl1" x="4494.7" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropl0" x="3131.16" y="1440.77" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropr0" x="9854.51" y="1440.77" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropl2" x="2752.62" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropl3" x="873.603" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropr1" x="8490.97" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropr2" x="10233" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <rect id="dropr3" x="12112.1" y="3784.49" width="757.083" height="1558.75" style="fill:#c6c4dd;"/>
          <path id="pathLeftStraight" d="M6419.33,4559.37l-6299.45,-0" style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftDown3" d="M6419.33,4559.37c0,-0 -3784.33,-0 -4915.33,-0c-207.657,-0 -412.636,46.88 -599.649,137.144c-316.574,152.798 -784.472,378.635 -784.472,378.635"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftDown2" d="M6419.33,4559.37c0,-0 -2223.3,-0 -3062.46,-0c-207.658,-0 -412.636,46.88 -599.65,137.144c-734.177,354.359 -2637.35,1272.95 -2637.35,1272.95"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftDown1" d="M6419.33,4559.37c0,-0 -763.643,-0 -1210.54,-0c-207.657,-0 -412.636,46.88 -599.649,137.144c-1027.43,495.899 -4489.27,2166.8 -4489.27,2166.8"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftUp3" d="M6419.33,4563.86c0,0 -3784.33,0 -4915.33,0c-207.657,0 -412.636,-46.88 -599.649,-137.144c-316.574,-152.798 -784.472,-378.635 -784.472,-378.635"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftUp2" d="M6419.33,4563.86c0,0 -2223.3,0 -3062.46,0c-207.658,0 -412.636,-46.88 -599.65,-137.144c-734.177,-354.359 -2637.35,-1272.95 -2637.35,-1272.95"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathLeftUp1" d="M6419.33,4563.86c0,0 -763.643,0 -1210.54,0c-207.657,0 -412.636,-46.88 -599.649,-137.144c-1027.43,-495.899 -4489.27,-2166.8 -4489.27,-2166.8"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
          <path id="pathRightStraight" d="M7323.42,4559.37l6299.45,-0" style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightDown3" d="M7323.42,4559.37c-0,-0 3784.33,-0 4915.33,-0c207.657,-0 412.636,46.88 599.649,137.144c316.574,152.798 784.472,378.635 784.472,378.635"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightDown2" d="M7323.42,4559.37c-0,-0 2223.3,-0 3062.46,-0c207.658,-0 412.636,46.88 599.65,137.144c734.177,354.359 2637.35,1272.95 2637.35,1272.95"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightDown1" d="M7323.42,4559.37c-0,-0 763.643,-0 1210.54,-0c207.657,-0 412.636,46.88 599.649,137.144c1027.43,495.899 4489.27,2166.8 4489.27,2166.8"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightUp3" d="M7323.42,4563.86c-0,0 3784.33,0 4915.33,0c207.657,0 412.636,-46.88 599.649,-137.144c316.574,-152.798 784.472,-378.635 784.472,-378.635"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightUp2" d="M7323.42,4563.86c-0,0 2223.3,0 3062.46,0c207.658,0 412.636,-46.88 599.65,-137.144c734.177,-354.359 2637.35,-1272.95 2637.35,-1272.95"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <path id="pathRightUp1" d="M7323.42,4563.86c-0,0 763.643,0 1210.54,0c207.657,0 412.636,-46.88 599.649,-137.144c1027.43,-495.899 4489.27,-2166.8 4489.27,-2166.8"
                style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
          <g id="electronGroupLeft"><g id="electrono"><g id="g238"><circle cx="394.947" cy="602.488" r="425.93" style="fill:url(#_Radial1);"/><path id="path222"
                                                                                                                                                    d="M367.655,235.392l-149.25,-0l176.542,-235.392l176.542,235.392l-149.25,-0l-0,684.746c-0,15.062 -12.229,27.291 -27.292,27.291c-15.062,0 -27.292,-12.229 -27.292,-27.291l0,-684.746Z"
                                                                                                                                                    style="fill:#d55e00;"/><g
              id="g236"><path id="path226" d="M305.755,463.55c0,21.096 3.409,40.438 3.409,62.492c-0,4.791 3.887,8.679 8.679,8.679c4.792,-0 8.679,-3.888 8.679,-8.679c0,-22.055 -3.408,-41.396 -3.408,-62.492c-0,-4.792 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.891 -8.68,8.683Z" style="fill:#000101;"/>
            <path id="path228"
                  d="M446.989,495.913c-0.071,1.32 -0.304,6.575 0.1,8.491c0.141,0.667 0.329,1.284 0.554,1.859c-0.067,1.366 -0.108,3.275 0.096,4.15c0.133,0.579 0.308,1.125 0.525,1.633c-0.042,0.908 -0.1,2.404 -0.1,3.012c-0,4.025 0.754,7.7 0.754,12.121c-0,4.788 3.892,8.679 8.683,8.679c4.792,0 8.679,-3.891 8.679,-8.679c0,-4.421 -0.758,-8.096 -0.758,-12.121c0,-1.741 0.217,-5.229 -0.217,-7.158c-0.108,-0.483 -0.245,-0.942 -0.4,-1.367c0.067,-1.375 0.113,-3.354 -0.095,-4.254c-0.155,-0.687 -0.375,-1.325 -0.642,-1.912c0.075,-1.175 0.212,-3.525 0.2,-4.796c-0.017,-1.675 -0.267,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.604 0.296,-4.521c-0,-6.867 0.754,-13.262 0.754,-20.071c-0,-4.791 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.892 -8.68,8.683c0,6.809 -0.758,13.204 -0.758,20.071c0,1.2 -0.354,3.45 -0.317,5.204c0.034,1.529 0.284,2.913 0.659,4.059Z"
                  style="fill:#000101;"/>
            <path id="path230"
                  d="M476.405,639.258c-0.495,0.775 -6.425,9.984 -7.916,11.475c-4.659,4.659 -16.809,18.942 -20.609,22.738c-3.662,3.666 -21.637,17.817 -25.17,20.512c-12.325,9.409 -29.08,8.525 -37.542,8.525c-8.596,0 -32.667,-4.354 -34.888,-5.091c-4.133,-1.38 -15.504,-5.684 -28.829,-15.992c-7.1,-5.492 -8.179,-15.9 -8.179,-21.129c0,-2.138 0.15,-4.183 0.554,-5.967c0.15,-0.658 0.546,-1.616 0.704,-1.987c3.871,-2.3 5.367,-7.242 3.321,-11.338c-2.141,-4.283 -7.362,-6.021 -11.646,-3.879c-3.304,1.65 -5.979,4.521 -7.741,8.525c-1.7,3.867 -2.55,9.067 -2.55,14.646c-0,8.754 3.033,25.671 14.912,34.862c15.679,12.125 29.1,17.109 33.967,18.729c2.567,0.855 30.425,5.98 40.375,5.98c10.896,-0 32.208,0.029 48.075,-12.084c3.783,-2.887 22.992,-18.112 26.917,-22.033c3.795,-3.8 15.95,-18.083 20.604,-22.742c1.879,-1.875 7.137,-8.179 10.116,-13.7c1.909,-3.537 2.863,-6.966 2.863,-9.454c-0,-4.787 -3.892,-8.679 -8.679,-8.679c-4.592,-0 -8.354,3.571 -8.659,8.083Z"
                  style="fill:#000101;"/>
            <path id="path232"
                  d="M155.876,592.804c-4.787,4.254 -10.558,7.613 -14.358,12.767c-3.838,5.208 -5.663,12.379 -8.679,18.483c-3.617,7.321 -9.388,17.638 -13.021,25.45c-3.254,7 -6.667,15.013 -8.788,21.425c-1.833,5.542 -2.525,11.396 -3.937,17.058c-1.717,6.884 -4.646,16.109 -6.363,24.238c-1.712,8.108 -3.062,16.304 -3.941,24.542c-0.909,8.537 -2.121,17.783 -1.513,26.666c0.654,9.592 3.634,20.605 5.454,30.904"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
            <path id="path234"
                  d="M636.31,597.954c5.183,1.904 15.545,5.713 19.745,12.213c5.059,7.821 8.109,23.662 10.609,34.721c2.341,10.383 3.7,21.008 4.371,31.633c0.729,11.575 0.208,25.208 -0,37.812c-0.225,13.438 -0.159,31.442 -1.342,42.817c-0.9,8.654 -3.788,17.675 -5.758,25.454c-1.805,7.125 -4.642,16.517 -6.059,21.209"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
            <g id="electronu"><g id="g257"><circle cx="298.147" cy="595.429" r="425.93" style="fill:url(#_Radial2);"/><path id="path241"
                                                                                                                            d="M270.855,962.525l0,-684.746c0,-15.062 12.23,-27.291 27.292,-27.291c15.063,-0 27.292,12.229 27.292,27.291l-0,684.746l149.25,0l-176.542,235.392l-176.546,-235.392l149.254,0Z"
                                                                                                                            style="fill:#359b73;"/><g id="g255"><path id="path245" d="M210.643,461.021c-0,21.096 3.408,40.437 3.408,62.492c0,4.791 3.892,8.683 8.684,8.683c4.787,-0 8.679,-3.892 8.679,-8.683c-0,-22.055 -3.409,-41.396 -3.409,-62.492c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.787,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
              <path id="path247"
                    d="M351.876,493.388c-0.066,1.32 -0.3,6.575 0.104,8.491c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.134,0.58 0.309,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.759,7.704 0.759,12.121c-0,4.792 3.887,8.679 8.679,8.679c4.791,0 8.683,-3.887 8.683,-8.679c0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.108,-0.483 -0.242,-0.938 -0.4,-1.367c0.067,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.08,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.787 -3.891,-8.679 -8.679,-8.679c-4.791,-0 -8.683,3.892 -8.683,8.679c-0,6.813 -0.758,13.204 -0.758,20.075c-0,1.2 -0.35,3.446 -0.317,5.2c0.033,1.533 0.287,2.913 0.658,4.063Z"
                    style="fill:#000101;"/>
              <path id="path249"
                    d="M381.293,636.733c-0.496,0.771 -6.425,9.984 -7.913,11.471c-4.658,4.659 -16.812,18.942 -20.608,22.742c-3.662,3.662 -21.642,17.817 -25.171,20.512c-12.325,9.405 -29.083,8.521 -37.541,8.521c-8.596,0 -32.671,-4.35 -34.888,-5.087c-4.133,-1.38 -15.504,-5.684 -28.833,-15.996c-7.1,-5.488 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.146,-4.184 0.554,-5.963c0.15,-0.662 0.546,-1.621 0.7,-1.987c3.875,-2.3 5.367,-7.246 3.321,-11.338c-2.142,-4.283 -7.359,-6.025 -11.646,-3.883c-3.304,1.654 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.063 -2.554,14.642c0,8.758 3.034,25.675 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.38,5.984c10.895,-0 32.204,0.029 48.075,-12.084c3.783,-2.887 22.987,-18.112 26.912,-22.037c3.8,-3.796 15.95,-18.079 20.608,-22.738c1.875,-1.879 7.134,-8.183 10.113,-13.704c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.679 -8.679,-8.679c-4.591,0 -8.354,3.571 -8.658,8.083Z"
                    style="fill:#000101;"/>
              <path id="path251"
                    d="M60.764,590.279c-4.784,4.254 -10.554,7.613 -14.354,12.767c-3.838,5.208 -5.667,12.379 -8.68,18.483c-3.616,7.321 -9.387,17.638 -13.02,25.45c-3.259,7 -6.667,15.009 -8.788,21.425c-1.833,5.538 -2.529,11.392 -3.942,17.054c-1.716,6.884 -4.645,16.109 -6.362,24.242c-1.713,8.104 -3.063,16.304 -3.938,24.542c-0.908,8.533 -2.125,17.783 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.909"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
              <path id="path253"
                    d="M541.201,595.429c5.179,1.904 15.542,5.713 19.746,12.209c5.058,7.825 8.108,23.662 10.604,34.725c2.342,10.383 3.704,21.008 4.371,31.629c0.729,11.575 0.213,25.212 0,37.812c-0.221,13.442 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.641,16.517 -6.062,21.212"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
            <g id="electron"><circle cx="350.23" cy="595.858" r="425.93" style="fill:url(#_Radial3);"/>
              <g id="g272"><path id="path262" d="M261.039,456.921c-0,21.096 3.408,40.437 3.408,62.491c0,4.792 3.892,8.684 8.683,8.684c4.788,-0 8.68,-3.892 8.68,-8.684c-0,-22.054 -3.409,-41.395 -3.409,-62.491c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.788,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
                <path id="path264"
                      d="M402.272,489.283c-0.067,1.321 -0.3,6.575 0.104,8.496c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.133,0.58 0.308,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.758,7.704 0.758,12.121c0,4.792 3.888,8.679 8.68,8.679c4.791,0 8.683,-3.887 8.683,-8.679c-0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.109,-0.483 -0.242,-0.938 -0.4,-1.367c0.066,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.079,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c-0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.792 -3.891,-8.679 -8.679,-8.679c-4.792,-0 -8.683,3.887 -8.683,8.679c-0,6.813 -0.759,13.204 -0.759,20.075c0,1.196 -0.35,3.446 -0.316,5.2c0.033,1.529 0.283,2.913 0.658,4.058Z"
                      style="fill:#000101;"/>
                <path id="path266"
                      d="M431.689,632.629c-0.496,0.775 -6.425,9.988 -7.913,11.475c-4.658,4.658 -16.812,18.942 -20.608,22.742c-3.663,3.662 -21.642,17.816 -25.171,20.508c-12.325,9.408 -29.083,8.525 -37.542,8.525c-8.595,0 -32.67,-4.35 -34.887,-5.092c-4.133,-1.375 -15.504,-5.683 -28.833,-15.991c-7.1,-5.492 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.145,-4.184 0.554,-5.967c0.15,-0.658 0.546,-1.617 0.7,-1.988c3.875,-2.3 5.366,-7.241 3.321,-11.333c-2.142,-4.287 -7.359,-6.025 -11.646,-3.883c-3.304,1.65 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.062 -2.554,14.642c0,8.754 3.033,25.67 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.379,5.984c10.892,-0 32.205,0.029 48.075,-12.084c3.784,-2.887 22.988,-18.112 26.913,-22.037c3.8,-3.8 15.95,-18.084 20.608,-22.742c1.875,-1.875 7.134,-8.179 10.113,-13.7c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.683 -8.679,-8.683c-4.592,-0 -8.354,3.571 -8.658,8.083Z"
                      style="fill:#000101;"/>
                <path id="path268"
                      d="M111.16,586.175c-4.784,4.258 -10.555,7.612 -14.355,12.767c-3.837,5.208 -5.666,12.383 -8.679,18.483c-3.616,7.325 -9.387,17.642 -13.021,25.454c-3.258,6.996 -6.666,15.008 -8.787,21.421c-1.833,5.542 -2.529,11.396 -3.942,17.058c-1.716,6.884 -4.646,16.109 -6.362,24.238c-1.713,8.108 -3.063,16.304 -3.938,24.546c-0.908,8.533 -2.125,17.779 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.904"
                      style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
                <path id="path270"
                      d="M591.597,591.329c5.179,1.904 15.542,5.708 19.746,12.208c5.058,7.821 8.108,23.663 10.604,34.721c2.342,10.384 3.704,21.013 4.371,31.634c0.729,11.575 0.212,25.212 -0,37.812c-0.221,13.438 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.642,16.517 -6.062,21.208"
                      style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <g id="electronGroupRight"><g id="electrono" serif:id="electrono"><g id="g2381" serif:id="g238"><circle cx="394.947" cy="602.488" r="425.93" style="fill:url(#_Radial4);"/><path
              id="path2221" serif:id="path222"
              d="M367.655,235.392l-149.25,-0l176.542,-235.392l176.542,235.392l-149.25,-0l-0,684.746c-0,15.062 -12.229,27.291 -27.292,27.291c-15.062,0 -27.292,-12.229 -27.292,-27.291l0,-684.746Z"
              style="fill:#d55e00;"/><g id="g2361" serif:id="g236"><path id="path2261" serif:id="path226" d="M305.755,463.55c0,21.096 3.409,40.438 3.409,62.492c-0,4.791 3.887,8.679 8.679,8.679c4.792,-0 8.679,-3.888 8.679,-8.679c0,-22.055 -3.408,-41.396 -3.408,-62.492c-0,-4.792 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.891 -8.68,8.683Z" style="fill:#000101;"/>
            <path id="path2281" serif:id="path228"
                  d="M446.989,495.913c-0.071,1.32 -0.304,6.575 0.1,8.491c0.141,0.667 0.329,1.284 0.554,1.859c-0.067,1.366 -0.108,3.275 0.096,4.15c0.133,0.579 0.308,1.125 0.525,1.633c-0.042,0.908 -0.1,2.404 -0.1,3.012c-0,4.025 0.754,7.7 0.754,12.121c-0,4.788 3.892,8.679 8.683,8.679c4.792,0 8.679,-3.891 8.679,-8.679c0,-4.421 -0.758,-8.096 -0.758,-12.121c0,-1.741 0.217,-5.229 -0.217,-7.158c-0.108,-0.483 -0.245,-0.942 -0.4,-1.367c0.067,-1.375 0.113,-3.354 -0.095,-4.254c-0.155,-0.687 -0.375,-1.325 -0.642,-1.912c0.075,-1.175 0.212,-3.525 0.2,-4.796c-0.017,-1.675 -0.267,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.604 0.296,-4.521c-0,-6.867 0.754,-13.262 0.754,-20.071c-0,-4.791 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.892 -8.68,8.683c0,6.809 -0.758,13.204 -0.758,20.071c0,1.2 -0.354,3.45 -0.317,5.204c0.034,1.529 0.284,2.913 0.659,4.059Z"
                  style="fill:#000101;"/>
            <path id="path2301" serif:id="path230"
                  d="M476.405,639.258c-0.495,0.775 -6.425,9.984 -7.916,11.475c-4.659,4.659 -16.809,18.942 -20.609,22.738c-3.662,3.666 -21.637,17.817 -25.17,20.512c-12.325,9.409 -29.08,8.525 -37.542,8.525c-8.596,0 -32.667,-4.354 -34.888,-5.091c-4.133,-1.38 -15.504,-5.684 -28.829,-15.992c-7.1,-5.492 -8.179,-15.9 -8.179,-21.129c0,-2.138 0.15,-4.183 0.554,-5.967c0.15,-0.658 0.546,-1.616 0.704,-1.987c3.871,-2.3 5.367,-7.242 3.321,-11.338c-2.141,-4.283 -7.362,-6.021 -11.646,-3.879c-3.304,1.65 -5.979,4.521 -7.741,8.525c-1.7,3.867 -2.55,9.067 -2.55,14.646c-0,8.754 3.033,25.671 14.912,34.862c15.679,12.125 29.1,17.109 33.967,18.729c2.567,0.855 30.425,5.98 40.375,5.98c10.896,-0 32.208,0.029 48.075,-12.084c3.783,-2.887 22.992,-18.112 26.917,-22.033c3.795,-3.8 15.95,-18.083 20.604,-22.742c1.879,-1.875 7.137,-8.179 10.116,-13.7c1.909,-3.537 2.863,-6.966 2.863,-9.454c-0,-4.787 -3.892,-8.679 -8.679,-8.679c-4.592,-0 -8.354,3.571 -8.659,8.083Z"
                  style="fill:#000101;"/>
            <path id="path2321" serif:id="path232"
                  d="M155.876,592.804c-4.787,4.254 -10.558,7.613 -14.358,12.767c-3.838,5.208 -5.663,12.379 -8.679,18.483c-3.617,7.321 -9.388,17.638 -13.021,25.45c-3.254,7 -6.667,15.013 -8.788,21.425c-1.833,5.542 -2.525,11.396 -3.937,17.058c-1.717,6.884 -4.646,16.109 -6.363,24.238c-1.712,8.108 -3.062,16.304 -3.941,24.542c-0.909,8.537 -2.121,17.783 -1.513,26.666c0.654,9.592 3.634,20.605 5.454,30.904"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
            <path id="path2341" serif:id="path234"
                  d="M636.31,597.954c5.183,1.904 15.545,5.713 19.745,12.213c5.059,7.821 8.109,23.662 10.609,34.721c2.341,10.383 3.7,21.008 4.371,31.633c0.729,11.575 0.208,25.208 -0,37.812c-0.225,13.438 -0.159,31.442 -1.342,42.817c-0.9,8.654 -3.788,17.675 -5.758,25.454c-1.805,7.125 -4.642,16.517 -6.059,21.209"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
            <g id="electronu" serif:id="electronu"><g id="g2571" serif:id="g257"><circle cx="298.147" cy="595.429" r="425.93" style="fill:url(#_Radial5);"/><path id="path2411"
                                                                                                                                                                   serif:id="path241"
                                                                                                                                                                   d="M270.855,962.525l0,-684.746c0,-15.062 12.23,-27.291 27.292,-27.291c15.063,-0 27.292,12.229 27.292,27.291l-0,684.746l149.25,0l-176.542,235.392l-176.546,-235.392l149.254,0Z"
                                                                                                                                                                   style="fill:#359b73;"/><g
                id="g2551" serif:id="g255"><path id="path2451" serif:id="path245" d="M210.643,461.021c-0,21.096 3.408,40.437 3.408,62.492c0,4.791 3.892,8.683 8.684,8.683c4.787,-0 8.679,-3.892 8.679,-8.683c-0,-22.055 -3.409,-41.396 -3.409,-62.492c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.787,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
              <path id="path2471" serif:id="path247"
                    d="M351.876,493.388c-0.066,1.32 -0.3,6.575 0.104,8.491c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.134,0.58 0.309,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.759,7.704 0.759,12.121c-0,4.792 3.887,8.679 8.679,8.679c4.791,0 8.683,-3.887 8.683,-8.679c0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.108,-0.483 -0.242,-0.938 -0.4,-1.367c0.067,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.08,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.787 -3.891,-8.679 -8.679,-8.679c-4.791,-0 -8.683,3.892 -8.683,8.679c-0,6.813 -0.758,13.204 -0.758,20.075c-0,1.2 -0.35,3.446 -0.317,5.2c0.033,1.533 0.287,2.913 0.658,4.063Z"
                    style="fill:#000101;"/>
              <path id="path2491" serif:id="path249"
                    d="M381.293,636.733c-0.496,0.771 -6.425,9.984 -7.913,11.471c-4.658,4.659 -16.812,18.942 -20.608,22.742c-3.662,3.662 -21.642,17.817 -25.171,20.512c-12.325,9.405 -29.083,8.521 -37.541,8.521c-8.596,0 -32.671,-4.35 -34.888,-5.087c-4.133,-1.38 -15.504,-5.684 -28.833,-15.996c-7.1,-5.488 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.146,-4.184 0.554,-5.963c0.15,-0.662 0.546,-1.621 0.7,-1.987c3.875,-2.3 5.367,-7.246 3.321,-11.338c-2.142,-4.283 -7.359,-6.025 -11.646,-3.883c-3.304,1.654 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.063 -2.554,14.642c0,8.758 3.034,25.675 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.38,5.984c10.895,-0 32.204,0.029 48.075,-12.084c3.783,-2.887 22.987,-18.112 26.912,-22.037c3.8,-3.796 15.95,-18.079 20.608,-22.738c1.875,-1.879 7.134,-8.183 10.113,-13.704c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.679 -8.679,-8.679c-4.591,0 -8.354,3.571 -8.658,8.083Z"
                    style="fill:#000101;"/>
              <path id="path2511" serif:id="path251"
                    d="M60.764,590.279c-4.784,4.254 -10.554,7.613 -14.354,12.767c-3.838,5.208 -5.667,12.379 -8.68,18.483c-3.616,7.321 -9.387,17.638 -13.02,25.45c-3.259,7 -6.667,15.009 -8.788,21.425c-1.833,5.538 -2.529,11.392 -3.942,17.054c-1.716,6.884 -4.645,16.109 -6.362,24.242c-1.713,8.104 -3.063,16.304 -3.938,24.542c-0.908,8.533 -2.125,17.783 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.909"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
              <path id="path2531" serif:id="path253"
                    d="M541.201,595.429c5.179,1.904 15.542,5.713 19.746,12.209c5.058,7.825 8.108,23.662 10.604,34.725c2.342,10.383 3.704,21.008 4.371,31.629c0.729,11.575 0.213,25.212 0,37.812c-0.221,13.442 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.641,16.517 -6.062,21.212"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
            <g id="electron" serif:id="electron"><circle cx="350.23" cy="595.858" r="425.93" style="fill:url(#_Radial6);"/>
              <g id="g2721" serif:id="g272"><path id="path2621" serif:id="path262" d="M261.039,456.921c-0,21.096 3.408,40.437 3.408,62.491c0,4.792 3.892,8.684 8.683,8.684c4.788,-0 8.68,-3.892 8.68,-8.684c-0,-22.054 -3.409,-41.395 -3.409,-62.491c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.788,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
                <path id="path2641" serif:id="path264"
                      d="M402.272,489.283c-0.067,1.321 -0.3,6.575 0.104,8.496c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.133,0.58 0.308,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.758,7.704 0.758,12.121c0,4.792 3.888,8.679 8.68,8.679c4.791,0 8.683,-3.887 8.683,-8.679c-0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.109,-0.483 -0.242,-0.938 -0.4,-1.367c0.066,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.079,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c-0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.792 -3.891,-8.679 -8.679,-8.679c-4.792,-0 -8.683,3.887 -8.683,8.679c-0,6.813 -0.759,13.204 -0.759,20.075c0,1.196 -0.35,3.446 -0.316,5.2c0.033,1.529 0.283,2.913 0.658,4.058Z"
                      style="fill:#000101;"/>
                <path id="path2661" serif:id="path266"
                      d="M431.689,632.629c-0.496,0.775 -6.425,9.988 -7.913,11.475c-4.658,4.658 -16.812,18.942 -20.608,22.742c-3.663,3.662 -21.642,17.816 -25.171,20.508c-12.325,9.408 -29.083,8.525 -37.542,8.525c-8.595,0 -32.67,-4.35 -34.887,-5.092c-4.133,-1.375 -15.504,-5.683 -28.833,-15.991c-7.1,-5.492 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.145,-4.184 0.554,-5.967c0.15,-0.658 0.546,-1.617 0.7,-1.988c3.875,-2.3 5.366,-7.241 3.321,-11.333c-2.142,-4.287 -7.359,-6.025 -11.646,-3.883c-3.304,1.65 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.062 -2.554,14.642c0,8.754 3.033,25.67 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.379,5.984c10.892,-0 32.205,0.029 48.075,-12.084c3.784,-2.887 22.988,-18.112 26.913,-22.037c3.8,-3.8 15.95,-18.084 20.608,-22.742c1.875,-1.875 7.134,-8.179 10.113,-13.7c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.683 -8.679,-8.683c-4.592,-0 -8.354,3.571 -8.658,8.083Z"
                      style="fill:#000101;"/>
                <path id="path2681" serif:id="path268"
                      d="M111.16,586.175c-4.784,4.258 -10.555,7.612 -14.355,12.767c-3.837,5.208 -5.666,12.383 -8.679,18.483c-3.616,7.325 -9.387,17.642 -13.021,25.454c-3.258,6.996 -6.666,15.008 -8.787,21.421c-1.833,5.542 -2.529,11.396 -3.942,17.058c-1.716,6.884 -4.646,16.109 -6.362,24.238c-1.713,8.108 -3.063,16.304 -3.938,24.546c-0.908,8.533 -2.125,17.779 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.904"
                      style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
                <path id="path2701" serif:id="path270"
                      d="M591.597,591.329c5.179,1.904 15.542,5.708 19.746,12.208c5.058,7.821 8.108,23.663 10.604,34.721c2.342,10.384 3.704,21.013 4.371,31.634c0.729,11.575 0.212,25.212 -0,37.812c-0.221,13.438 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.642,16.517 -6.062,21.208"
                      style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <rect id="shootButtonPos" x="6782.49" y="6111.95" width="177.777" height="177.777" style="fill:none;"/>
          <rect id="spinButtonPos" x="2558.71" y="6111.95" width="177.777" height="177.777" style="fill:none;"/>
          <g id="magnetr"><g><path d="M658.115,1153.51l-480.403,-0l0,321.863l480.403,-0l-0,-321.863Zm-0,-0l-480.403,-0l-162.255,-85.73l480.402,0l162.256,85.73Zm-642.659,-85.73l162.255,85.73l0,321.863l-162.255,-85.73l-0,-321.863Z" style="fill:#03458f;stroke:#010001;stroke-width:10.47px;"/><path
              id="path217"
              d="M358.857,1343.73c-0.051,-2.23 0.709,-4.046 2.284,-5.455c1.575,-1.405 3.512,-2.109 5.808,-2.109c2.619,-0 4.915,1.486 6.891,4.461c2.721,4.031 5.155,6.766 7.289,8.199c4.54,2.974 11.136,4.457 19.787,4.457c8.281,0 15.972,-1.776 23.076,-5.334c9.076,-4.563 13.617,-10.907 13.617,-19.028c-0,-6.688 -3.816,-11.971 -11.455,-15.845c-6.462,-3.343 -14.448,-5.147 -23.954,-5.413c-8.439,-0.321 -15.621,-2.152 -21.551,-5.495c-7.585,-4.301 -11.377,-10.457 -11.377,-18.472c0,-9.447 5.395,-18.072 16.185,-25.876c10.305,-7.381 20.96,-11.067 31.962,-11.067c5.183,-0 11.03,0.876 17.548,2.626c8.651,2.281 12.978,5.201 12.978,8.758c0,4.673 -2.402,7.009 -7.21,7.009c-2.138,0 -5.875,-0.571 -11.215,-1.714c-5.343,-1.143 -9.482,-1.687 -12.419,-1.632c-8.333,0.106 -15.409,2.149 -21.229,6.133c-5.981,4.086 -8.974,9.048 -8.974,14.887c-0,4.406 3.953,7.51 11.857,9.314c2.937,0.693 8.627,1.331 17.066,1.914c12.231,0.9 21.788,4.723 28.679,11.463c6.304,6.16 9.454,13.67 9.454,22.534c0,12.633 -5.875,22.718 -17.625,30.255c-10.203,6.532 -22.032,9.796 -35.492,9.796c-9.773,-0 -18.72,-1.859 -26.839,-5.573c-9.931,-4.567 -14.98,-10.829 -15.141,-18.793Z"
              style="fill:#fff;fill-rule:nonzero;"/></g>
            <g><path d="M673.57,86.175l-501.287,0l0,253.797l501.287,-0l-0,-253.797Zm-86.143,295.188l-501.286,-0l86.142,-41.391l501.287,-0l-86.143,41.391Zm-585.391,-381.362l170.248,86.175l0,253.796l-87.342,41.391l-84.942,-127.115l2.036,-254.248l-0,0.001Zm501.286,-0l-501.286,-0l170.248,86.175l501.287,-0l-170.249,-86.175Z" style="fill:#d40000;stroke:#010001;stroke-width:10.47px;"/>
              <path id="magnetN"
                    d="M478.417,257.271c0,2.548 -0.425,6.794 -1.279,12.739c-0.855,5.361 -3.714,8.042 -8.573,8.042c-2.938,0 -6.438,-1.91 -10.494,-5.733c-21.741,-20.437 -46.683,-49.921 -74.83,-88.458l-0.398,18.073l-0.24,18.155c-0,4.403 0.09,11.013 0.279,19.826c0.186,8.809 0.28,15.446 0.28,19.904c0,14.276 -2.776,21.419 -8.332,21.419c-2.938,-0 -5.261,-0.932 -6.97,-2.787c-1.548,-1.647 -2.323,-3.612 -2.323,-5.893c-0,-2.231 0.173,-5.601 0.519,-10.113c0.347,-4.512 0.524,-7.882 0.524,-10.112c0,-3.288 0.106,-8.211 0.319,-14.77c0.213,-6.555 0.319,-11.479 0.319,-14.77c0,-3.503 -0.079,-8.798 -0.24,-15.881c-0.157,-7.088 -0.24,-12.383 -0.24,-15.885c-0,-3.346 -0.319,-8.321 -0.961,-14.93c-0.642,-6.61 -0.961,-11.585 -0.961,-14.931c0,-2.441 1.055,-4.669 3.166,-6.688c2.107,-2.015 4.497,-3.025 7.167,-3.025c2.831,-0 6.332,3.08 10.498,9.236c13.298,19.798 25.261,36.255 35.889,49.365c12.66,15.553 26.545,30.416 41.662,44.587c0.157,-2.281 0.157,-5.651 -0,-10.108l-0.24,-10.035c-0,-23.301 -0.91,-41.855 -2.726,-55.654c-0.212,-1.382 -0.933,-4.168 -2.161,-8.359c-1.071,-3.613 -1.603,-6.423 -1.603,-8.442c-0,-6.156 2.831,-9.236 8.49,-9.236c9.293,0 13.94,17.224 13.94,51.675c-0,5.893 -0.079,14.691 -0.241,26.393c-0.157,11.705 -0.24,20.503 -0.24,26.396Z"
                    style="fill:#fff;fill-rule:nonzero;"/></g>
            <rect x="0" y="-0" width="679.071" height="1475.37" style="fill:#ebebeb;fill-opacity:0;"/></g>
          <g id="magnetl"><g><path d="M20.956,1153.51l480.402,-0l0,321.863l-480.402,-0l0,-321.863Zm0,-0l480.402,-0l162.256,-85.73l-480.402,0l-162.256,85.73Zm642.659,-85.73l-162.256,85.73l0,321.863l162.256,-85.73l0,-321.863Z" style="fill:#03458f;stroke:#010001;stroke-width:10.47px;"/><path
              id="path2171" serif:id="path217"
              d="M225.119,1343.73c-0.051,-2.23 0.709,-4.046 2.284,-5.455c1.575,-1.405 3.513,-2.109 5.808,-2.109c2.619,-0 4.915,1.486 6.891,4.461c2.721,4.031 5.155,6.766 7.289,8.199c4.541,2.974 11.136,4.457 19.788,4.457c8.281,0 15.971,-1.776 23.075,-5.334c9.077,-4.563 13.617,-10.907 13.617,-19.028c-0,-6.688 -3.816,-11.971 -11.455,-15.845c-6.462,-3.343 -14.448,-5.147 -23.954,-5.413c-8.438,-0.321 -15.621,-2.152 -21.551,-5.495c-7.584,-4.301 -11.376,-10.457 -11.376,-18.472c-0,-9.447 5.394,-18.072 16.184,-25.876c10.305,-7.381 20.961,-11.067 31.963,-11.067c5.182,-0 11.03,0.876 17.547,2.626c8.651,2.281 12.978,5.201 12.978,8.758c0,4.673 -2.401,7.009 -7.209,7.009c-2.139,0 -5.875,-0.571 -11.215,-1.714c-5.344,-1.143 -9.482,-1.687 -12.42,-1.632c-8.332,0.106 -15.409,2.149 -21.229,6.133c-5.981,4.086 -8.974,9.048 -8.974,14.887c0,4.406 3.954,7.51 11.857,9.314c2.937,0.693 8.627,1.331 17.066,1.914c12.231,0.9 21.788,4.723 28.679,11.463c6.304,6.16 9.455,13.67 9.455,22.534c-0,12.633 -5.875,22.718 -17.626,30.255c-10.203,6.532 -22.032,9.796 -35.491,9.796c-9.774,-0 -18.72,-1.859 -26.84,-5.573c-9.931,-4.567 -14.979,-10.829 -15.141,-18.793Z"
              style="fill:#fff;fill-rule:nonzero;"/></g>
            <g><path d="M5.501,86.175l501.286,0l0,253.797l-501.286,-0l0,-253.797Zm86.142,295.188l501.287,-0l-86.143,-41.391l-501.286,-0l86.142,41.391Zm585.392,-381.362l-170.249,86.175l0,253.796l87.343,41.391l84.942,-127.115l-2.036,-254.248l0,0.001Zm-501.286,-0l501.286,-0l-170.249,86.175l-501.286,-0l170.249,-86.175Z" style="fill:#d40000;stroke:#010001;stroke-width:10.47px;"/>
              <path id="magnetN1" serif:id="magnetN"
                    d="M313.774,257.271c0,2.548 -0.425,6.794 -1.279,12.739c-0.855,5.361 -3.714,8.042 -8.573,8.042c-2.938,0 -6.438,-1.91 -10.494,-5.733c-21.741,-20.437 -46.683,-49.921 -74.83,-88.458l-0.398,18.073l-0.24,18.155c0,4.403 0.091,11.013 0.28,19.826c0.185,8.809 0.279,15.446 0.279,19.904c0,14.276 -2.776,21.419 -8.332,21.419c-2.938,-0 -5.261,-0.932 -6.97,-2.787c-1.547,-1.647 -2.323,-3.612 -2.323,-5.893c-0,-2.231 0.173,-5.601 0.519,-10.113c0.347,-4.512 0.524,-7.882 0.524,-10.112c0,-3.288 0.107,-8.211 0.319,-14.77c0.213,-6.555 0.32,-11.479 0.32,-14.77c-0,-3.503 -0.079,-8.798 -0.241,-15.881c-0.157,-7.088 -0.24,-12.383 -0.24,-15.885c0,-3.346 -0.319,-8.321 -0.961,-14.93c-0.642,-6.61 -0.961,-11.585 -0.961,-14.931c0,-2.441 1.056,-4.669 3.166,-6.688c2.107,-2.015 4.497,-3.025 7.167,-3.025c2.831,-0 6.332,3.08 10.498,9.236c13.298,19.798 25.261,36.255 35.889,49.365c12.66,15.553 26.545,30.416 41.662,44.587c0.157,-2.281 0.157,-5.651 -0,-10.108l-0.24,-10.035c-0,-23.301 -0.91,-41.855 -2.725,-55.654c-0.213,-1.382 -0.933,-4.168 -2.162,-8.359c-1.071,-3.613 -1.603,-6.423 -1.603,-8.442c0,-6.156 2.832,-9.236 8.49,-9.236c9.293,0 13.94,17.224 13.94,51.675c-0,5.893 -0.079,14.691 -0.241,26.393c-0.157,11.705 -0.24,20.503 -0.24,26.396Z"
                    style="fill:#fff;fill-rule:nonzero;"/></g>
            <rect x="0" y="-0" width="679.071" height="1475.37" style="fill:#ebebeb;fill-opacity:0;"/></g>
          <defs><radialGradient id="_Radial1" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,394.947,608.501)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/><stop
              offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/><stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/><stop offset="1"
                                                                                                                                                  style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
            <radialGradient id="_Radial2" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,298.147,601.443)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
              <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
              <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
              <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
            <radialGradient id="_Radial3" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,350.23,601.872)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
              <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
              <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
              <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
            <radialGradient id="_Radial4" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,394.947,608.501)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
              <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
              <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
              <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
            <radialGradient id="_Radial5" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,298.147,601.443)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
              <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
              <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
              <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
            <radialGradient id="_Radial6" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,350.23,601.872)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
              <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
              <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
              <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient></defs></svg>


    </div>
  </div>
</template>

<script lang="ts" setup>


// function click() {
//   console.log('magnet=', document.querySelector('#magnetl'));
//   console.log('svgRoot=', document.querySelector('#simulation'));
// }

import {ref, Ref, onMounted} from "vue";
import {moveElementAlongPathElement, putSvgToTranslate} from "@/scripts/svgAnimation";
import {makeDraggable, makeDropZoneDropTarget} from "@/scripts/makeDraggablev2";
import {
  addTranslate,
  centerSvgEl,
  generateSvgUsingTemplate,
  getCenterOfSVGEl,
  getSvgCenter, getSvgCenter2
} from "@/scripts/positioning";

// const simulation: Ref<SVGSVGElement | null> = ref(null);
const loading = ref(true);
const state: Ref<'initialized' | 'shot' | 'animating'> = ref('initialized');
const elements: { [key: string]: SVGSVGElement | null } = {
  magnetl: null,
  magnetr: null,
  electronGroupRight: null,
  electronGroupLeft: null,
  pathTopLeft: null,
  pathTopRight: null,
  dropr0: null,
  dropl0: null,
  baseDropZone: null,
  dropl1: null,
  dropl2: null,
  dropl3: null,
  dropr1: null,
  dropr2: null,
  dropr3: null,
  cooperframe: null,
  simulation: null
}

let electronLeft: SVGSVGElement;
let electronRight: SVGSVGElement;

function moveElAlongPath() {
  moveDotAlongPath(electronLeft!);
}

function moveDotAlongPath(electron: SVGSVGElement) {
  // centerGroup(magnet!);
  moveElementAlongPathElement(electron!, (elements.pathTopRight! as unknown) as SVGPathElement, 3);
}


function makeMagnetDraggable(magnet: SVGSVGElement, baseDropZone: SVGSVGElement, dropZones: SVGSVGElement[], dragTargetClass: string) {
  const magnetBasePosition = getCenterOfSVGEl(baseDropZone);
  putSvgToTranslate(magnet, magnetBasePosition);
  (magnet as any).currentPosition = baseDropZone.id;
  makeDraggable(elements.simulation!, magnet, dragTargetClass, () => {
    putSvgToTranslate(magnet, magnetBasePosition!);
  });
  [baseDropZone, ...dropZones].forEach(e => {
    makeDropZoneDropTarget(elements.simulation!, e, dragTargetClass);
  });
  (magnet as any).currentPosition123 = baseDropZone.id;
}


function initializeElectrons() {
  if (!electronLeft) {
    electronLeft = elements.electronGroupLeft!;
  }
  if (!electronRight) {
    electronRight = elements.electronGroupRight!;
  }

  [electronLeft, electronRight].forEach(e => e.classList.remove('up', 'down', 'deceased'))
  const initLeft = ((elements.simulation!.querySelector('#pathLeftStraight') as unknown) as SVGPathElement).getPointAtLength(0);
  const initRight = ((elements.simulation!.querySelector('#pathRightStraight') as unknown) as SVGPathElement).getPointAtLength(0);
  putSvgToTranslate(electronLeft, initLeft);
  putSvgToTranslate(electronRight, initRight);
  elements.simulation!.appendChild(electronLeft);
  elements.simulation!.appendChild(electronRight);
  elements.cooperframe!.style.visibility = 'visible';
  state.value = 'initialized';
}

function toggleMagnetDisable() {
  elements.magnetl?.classList.toggle('disabled');
  elements.magnetr?.classList.toggle('disabled');
}

function shootElectrons() {

  toggleMagnetDisable();
  state.value = 'animating';
  const magnetLPosition = +(elements.magnetl! as any).currentPosition.slice(-1);
  const magnetRPosition = +(elements.magnetr! as any).currentPosition.slice(-1);
  const leftSpinUp = Math.random() > 0.5;
  let spinResolved = false;
  const electronLeftPath: SVGPathElement = magnetLPosition == 0 ? elements.simulation!.querySelector('#pathLeftStraight')! : elements.simulation!.querySelector(`#pathLeft${leftSpinUp ? 'Up' : 'Down'}${magnetLPosition}`)!
  const electronRightPath: SVGPathElement = magnetRPosition == 0 ? elements.simulation!.querySelector('#pathRightStraight')! : elements.simulation!.querySelector(`#pathRight${leftSpinUp ? 'Down' : 'Up'}${magnetRPosition}`)!
  // console.log('electronLeftPath=', electronLeftPath, 'id=', `#pathLeft${leftSpinUp ? 'Up' : 'Down'}${magnetLPosition}`)
  // console.log('electronRightPath=', electronRightPath, 'id=', `#pathRight${leftSpinUp ? 'Up' : 'Down'}${magnetRPosition}`)

  // Note the next 2 lines result in problems with safari and firefox, as they dont have .getComputedStyle(el).transform
  // const leftSpinBorder0 = magnetLPosition == 0 ? 0 : getSvgCenter(elements.magnetl!).x;
  // const rightSpinBorder0 = magnetRPosition == 0 ? Number.POSITIVE_INFINITY : getSvgCenter(elements.magnetr!).x;
  // Workaround
  const leftSpinBorder = magnetLPosition == 0 ? 0 :
      Object.values(elements.magnetl!.transform.baseVal)
          .reduce((a, b) => a + b.matrix.e, 0) + elements.magnetl!.getBBox().width / 2;
  const rightSpinBorder = magnetRPosition == 0 ? Number.POSITIVE_INFINITY :
      Object.values(elements.magnetr!.transform.baseVal)
          .reduce((a, b) => a + b.matrix.e, 0) + elements.magnetr!.getBBox().width / 2;

  const maxPathOfAllPathLengths = Math.max(
      (elements.simulation!.querySelector('#pathRightDown1') as SVGPathElement).getTotalLength(),
      (elements.simulation!.querySelector('#pathRightDown2') as SVGPathElement).getTotalLength(),
      (elements.simulation!.querySelector('#pathRightDown3') as SVGPathElement).getTotalLength()
  );
  const maxPathDuration = 4;
  const speed = maxPathOfAllPathLengths / maxPathDuration;
  const leftPathLength = electronLeftPath.getTotalLength();
  const rightPathLength = electronRightPath.getTotalLength();
  const maxPathLength = Math.max(leftPathLength, rightPathLength);
  const duration = maxPathLength / speed;
  const fps = 120;
  const totalUpdates = Math.ceil(fps * duration);
  let i = 0;
  elements.cooperframe!.style.visibility = 'hidden';

  const interval = setInterval(() => {
    const alpha = i / totalUpdates;
    const length = maxPathLength * alpha;
    const pointElLeftPos = electronLeftPath.getPointAtLength(length);
    const pointElRightPos = electronRightPath.getPointAtLength(length);
    putSvgToTranslate(electronLeft!, pointElLeftPos);
    putSvgToTranslate(electronRight!, pointElRightPos);
    if (!spinResolved) {
      // console.log('borders= ', leftSpinBorder, pointElLeftPos.x, pointElRightPos.x, rightSpinBorder)
      if (pointElLeftPos.x < leftSpinBorder || pointElRightPos.x > rightSpinBorder) {
        spinResolved = true;
        electronLeft?.classList.add(leftSpinUp ? 'up' : 'down');
        electronRight?.classList.add(leftSpinUp ? 'down' : 'up');
      }
    }
    if (length >= leftPathLength) electronLeft?.classList.add('deceased');
    if (length >= rightPathLength) electronRight?.classList.add('deceased');
    // console.log('speed=', speed)
    // console.log('length=', length)
    // console.log('rightPathLength=', rightPathLength)
    // console.log('leftPathLength=', leftPathLength)
    i++;
    if (i > totalUpdates) {
      clearInterval(interval);
      toggleMagnetDisable(); // TODO after animation
      setTimeout(() => {
        initializeElectrons()
        state.value = 'initialized';
      }, 1000)
    }
  }, 1000 / fps)
}

let spinVisible = ref(false);

function toggleSpin() {
  spinVisible.value = !spinVisible.value;
  Array.from(elements.simulation!.querySelectorAll('#electronGroupLeft,#electronGroupRight')).forEach(el => el.classList.toggle('spin'))
}

function positionButtonsOnSimulation() {
  for (let buttonName of ['spin', 'shoot',]) {
    const button: HTMLElement | null = document.querySelector('#' + buttonName + 'Button');
    if (button) {
      const pos: SVGSVGElement = document.querySelector('#' + buttonName + 'ButtonPos')!;
      const {x, y, width, height} = pos.getBoundingClientRect();
      button.style.left = x + width / 2 + 'px';
      button.style.top = y + height / 2 + 'px';
    }
  }
}

onMounted(() => {
  for (let key in elements) {
    elements[key] = document.querySelector('#' + key);
  }

  // Initialize magnets
  addTranslate(elements.simulation!, elements.magnetl!); // FIRST add Translate, that is supposed to be changed later for positioning
  addTranslate(elements.simulation!, elements.magnetr!);
  centerSvgEl(elements.simulation!, elements.magnetl!) // THEN put centering in the back of it
  centerSvgEl(elements.simulation!, elements.magnetr!)
  makeMagnetDraggable(elements.magnetl!, elements.dropl0!, [elements.dropl1!, elements.dropl2!, elements.dropl3!], 'dragL');
  makeMagnetDraggable(elements.magnetr!, elements.dropr0!, [elements.dropr1!, elements.dropr2!, elements.dropr3!], 'dragR');
  // (elements.simulation!.querySelector('#electronGroup')! as HTMLElement).style.visibility = 'hidden';
  addTranslate(elements.simulation!, elements.electronGroupLeft!);
  centerSvgEl(elements.simulation!, elements.electronGroupLeft!);
  addTranslate(elements.simulation!, elements.electronGroupRight!);
  centerSvgEl(elements.simulation!, elements.electronGroupRight!);
  initializeElectrons();
  positionButtonsOnSimulation();
  addEventListener("resize", (event) => positionButtonsOnSimulation());
  loading.value = false; // TODO
})

</script>

<style scoped lang="scss">

#electronGroupLeft, #electronGroupRight {
  &.deceased {
    opacity: 0;
  }

  #electrono, #electronu, #electron {
    transition: opacity 0.5s;
  }

  #electrono, #electronu {
    opacity: 0;
  }

  #electron {
    opacity: 1;
  }

  &.spin {
    #electrono, #electronu {
      opacity: 0.5;
    }

    #electron {
      opacity: 0;
    }


    &.down {
      #electron, #electrono {
        opacity: 0;
      }

      #electronu {
        opacity: 1 !important;
      }
    }

    &.up {
      #electron, #electronu {
        opacity: 0;
      }

      #electrono {
        opacity: 1;
      }
    }
  }

}

#simulation {
  /*max-width: 100%;*/
  /*max-height: 80vh;*/
}

#magnetl, #magnetr {
  cursor: grab;
}

#magnetl.disabled, #magnetr.disabled {
  cursor: not-allowed;
}

</style>
