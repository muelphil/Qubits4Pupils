<template>
  <div id="sim3-container">
    <h1 style="text-align: center">
      {{ $t('simulation3.index') }}: {{ $t('simulation3.label') }}
    </h1>
    <div :style="{'visibility': loading ? 'hidden' : 'visible'}" class="simulation-container">
      <svg id="simulation" ref="simulation" width="100%" height="100%"
           viewBox="0 0 13892 6859" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
           xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">
<g id="cooperframe"><ellipse id="fill" cx="6871.38" cy="4063.87" rx="1071.38" ry="511.279" style="fill:#e5e5e5;"/>
  <path id="frame"
        d="M6871.38,3552.58c591.313,0 1071.38,229.096 1071.38,511.279c0,282.184 -480.07,511.279 -1071.38,511.279c-591.313,0 -1071.38,-229.095 -1071.38,-511.279c-0,-282.183 480.07,-511.279 1071.38,-511.279Zm0,66.804c339.646,0 641.408,77.079 828.113,198.592c107.533,69.987 176.462,152.529 176.462,245.883c-0,93.354 -68.929,175.896 -176.463,245.884c-186.704,121.512 -488.466,198.591 -828.112,198.591c-339.646,0 -641.408,-77.079 -828.113,-198.591c-107.533,-69.988 -176.466,-152.53 -176.466,-245.884c-0,-93.354 68.933,-175.896 176.466,-245.883c186.705,-121.513 488.467,-198.592 828.113,-198.592Z"/></g>
        <rect id="dropl1" x="4430.95" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="timer3" x="12401.7" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timer2" x="10522.7" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timer1" x="8780.62" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timel1" x="4784.35" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timel2" x="3042.27" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timel3" x="1163.26" y="5421.85" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="dropl0" x="3141.87" y="155.146" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropr0" x="9865.21" y="155.146" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropl2" x="2688.87" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropl3" x="809.853" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropr1" x="8427.22" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropr2" x="10169.3" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <rect id="dropr3" x="12048.3" y="2998.87" width="884.583" height="2130" style="fill:#c6c4dd;"/>
        <path id="pathLeftStraight" d="M6419.33,4059.37l-6299.45,-0" style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftDown3" d="M6419.33,4059.37c0,-0 -3784.33,-0 -4915.33,-0c-207.657,-0 -412.636,46.88 -599.649,137.144c-316.574,152.798 -784.472,378.635 -784.472,378.635"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftDown2" d="M6419.33,4059.37c0,-0 -2223.3,-0 -3062.46,-0c-207.658,-0 -412.636,46.88 -599.65,137.144c-734.177,354.359 -2637.35,1272.95 -2637.35,1272.95"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftDown1" d="M6419.33,4059.37c0,-0 -763.643,-0 -1210.54,-0c-207.657,-0 -412.636,46.88 -599.649,137.144c-1027.43,495.899 -4489.27,2166.8 -4489.27,2166.8"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftUp3" d="M6419.33,4063.87c0,0 -3784.33,0 -4915.33,0c-207.657,0 -412.636,-46.88 -599.649,-137.144c-316.574,-152.798 -784.472,-378.635 -784.472,-378.635"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftUp2" d="M6419.33,4063.87c0,0 -2223.3,0 -3062.46,0c-207.658,0 -412.636,-46.88 -599.65,-137.144c-734.177,-354.359 -2637.35,-1272.95 -2637.35,-1272.95"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathLeftUp1" d="M6419.33,4063.87c0,0 -763.643,0 -1210.54,0c-207.657,0 -412.636,-46.88 -599.649,-137.144c-1027.43,-495.899 -4489.27,-2166.8 -4489.27,-2166.8"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:19.72px;"/>
        <path id="pathRightStraight" d="M7323.42,4059.37l6299.45,-0" style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightDown3" d="M7323.42,4059.37c-0,-0 3784.33,-0 4915.33,-0c207.657,-0 412.636,46.88 599.649,137.144c316.574,152.798 784.472,378.635 784.472,378.635"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightDown2" d="M7323.42,4059.37c-0,-0 2223.3,-0 3062.46,-0c207.658,-0 412.636,46.88 599.65,137.144c734.177,354.359 2637.35,1272.95 2637.35,1272.95"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightDown1" d="M7323.42,4059.37c-0,-0 763.643,-0 1210.54,-0c207.657,-0 412.636,46.88 599.649,137.144c1027.43,495.899 4489.27,2166.8 4489.27,2166.8"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightUp3" d="M7323.42,4063.87c-0,0 3784.33,0 4915.33,0c207.657,0 412.636,-46.88 599.649,-137.144c316.574,-152.798 784.472,-378.635 784.472,-378.635"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightUp2" d="M7323.42,4063.87c-0,0 2223.3,0 3062.46,0c207.658,0 412.636,-46.88 599.65,-137.144c734.177,-354.359 2637.35,-1272.95 2637.35,-1272.95"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <path id="pathRightUp1" d="M7323.42,4063.87c-0,0 763.643,0 1210.54,0c207.657,0 412.636,-46.88 599.649,-137.144c1027.43,-495.899 4489.27,-2166.8 4489.27,-2166.8"
              style="fill:none;stroke:#000;stroke-opacity:0;stroke-width:6.47px;"/>
        <g id="electronGroupLeft"><g id="electrono"><g id="g238"><circle cx="394.947" cy="602.488" r="425.93" style="fill:url(#_Radial1);"/><path id="path222"
                                                                                                                                                  d="M367.655,235.392l-149.25,-0l176.542,-235.392l176.542,235.392l-149.25,-0l-0,684.746c-0,15.062 -12.229,27.291 -27.292,27.291c-15.062,0 -27.292,-12.229 -27.292,-27.291l0,-684.746Z"
                                                                                                                                                  style="fill:#d55e00;"/><g
            id="g236"><path id="path226" d="M305.755,463.55c0,21.096 3.409,40.438 3.409,62.492c-0,4.791 3.887,8.679 8.679,8.679c4.792,-0 8.679,-3.888 8.679,-8.679c0,-22.055 -3.408,-41.396 -3.408,-62.492c-0,-4.792 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.891 -8.68,8.683Z" style="fill:#000101;"/>
          <path id="path228"
                d="M446.989,495.913c-0.071,1.32 -0.304,6.575 0.1,8.491c0.141,0.667 0.329,1.284 0.554,1.859c-0.067,1.366 -0.108,3.275 0.096,4.15c0.133,0.579 0.308,1.125 0.525,1.633c-0.042,0.908 -0.1,2.404 -0.1,3.012c-0,4.025 0.754,7.7 0.754,12.121c-0,4.788 3.892,8.679 8.683,8.679c4.792,0 8.679,-3.891 8.679,-8.679c0,-4.421 -0.758,-8.096 -0.758,-12.121c0,-1.741 0.217,-5.229 -0.217,-7.158c-0.108,-0.483 -0.245,-0.942 -0.4,-1.367c0.067,-1.375 0.113,-3.354 -0.095,-4.254c-0.155,-0.687 -0.375,-1.325 -0.642,-1.912c0.075,-1.175 0.212,-3.525 0.2,-4.796c-0.017,-1.675 -0.267,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.604 0.296,-4.521c-0,-6.867 0.754,-13.262 0.754,-20.071c-0,-4.791 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.892 -8.68,8.683c0,6.809 -0.758,13.204 -0.758,20.071c0,1.2 -0.354,3.45 -0.317,5.204c0.034,1.529 0.284,2.913 0.659,4.059Z"
                style="fill:#000101;"/>
          <path id="path230"
                d="M476.405,639.258c-0.495,0.775 -6.425,9.984 -7.916,11.475c-4.659,4.659 -16.809,18.942 -20.609,22.738c-3.662,3.666 -21.637,17.817 -25.17,20.512c-12.325,9.409 -29.08,8.525 -37.542,8.525c-8.596,0 -32.667,-4.354 -34.888,-5.091c-4.133,-1.38 -15.504,-5.684 -28.829,-15.992c-7.1,-5.492 -8.179,-15.9 -8.179,-21.129c0,-2.138 0.15,-4.183 0.554,-5.967c0.15,-0.658 0.546,-1.616 0.704,-1.987c3.871,-2.3 5.367,-7.242 3.321,-11.338c-2.141,-4.283 -7.362,-6.021 -11.646,-3.879c-3.304,1.65 -5.979,4.521 -7.741,8.525c-1.7,3.867 -2.55,9.067 -2.55,14.646c-0,8.754 3.033,25.671 14.912,34.862c15.679,12.125 29.1,17.109 33.967,18.729c2.567,0.855 30.425,5.98 40.375,5.98c10.896,-0 32.208,0.029 48.075,-12.084c3.783,-2.887 22.992,-18.112 26.917,-22.033c3.795,-3.8 15.95,-18.083 20.604,-22.742c1.879,-1.875 7.137,-8.179 10.116,-13.7c1.909,-3.537 2.863,-6.966 2.863,-9.454c-0,-4.787 -3.892,-8.679 -8.679,-8.679c-4.592,-0 -8.354,3.571 -8.659,8.083Z"
                style="fill:#000101;"/>
          <path id="path232"
                d="M155.876,592.804c-4.787,4.254 -10.558,7.613 -14.358,12.767c-3.838,5.208 -5.663,12.379 -8.679,18.483c-3.617,7.321 -9.388,17.638 -13.021,25.45c-3.254,7 -6.667,15.013 -8.788,21.425c-1.833,5.542 -2.525,11.396 -3.937,17.058c-1.717,6.884 -4.646,16.109 -6.363,24.238c-1.712,8.108 -3.062,16.304 -3.941,24.542c-0.909,8.537 -2.121,17.783 -1.513,26.666c0.654,9.592 3.634,20.605 5.454,30.904"
                style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
          <path id="path234"
                d="M636.31,597.954c5.183,1.904 15.545,5.713 19.745,12.213c5.059,7.821 8.109,23.662 10.609,34.721c2.341,10.383 3.7,21.008 4.371,31.633c0.729,11.575 0.208,25.208 -0,37.812c-0.225,13.438 -0.159,31.442 -1.342,42.817c-0.9,8.654 -3.788,17.675 -5.758,25.454c-1.805,7.125 -4.642,16.517 -6.059,21.209"
                style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <g id="electronu"><g id="g257"><circle cx="298.147" cy="595.429" r="425.93" style="fill:url(#_Radial2);"/><path id="path241"
                                                                                                                          d="M270.855,962.525l0,-684.746c0,-15.062 12.23,-27.291 27.292,-27.291c15.063,-0 27.292,12.229 27.292,27.291l-0,684.746l149.25,0l-176.542,235.392l-176.546,-235.392l149.254,0Z"
                                                                                                                          style="fill:#359b73;"/><g id="g255"><path id="path245" d="M210.643,461.021c-0,21.096 3.408,40.437 3.408,62.492c0,4.791 3.892,8.683 8.684,8.683c4.787,-0 8.679,-3.892 8.679,-8.683c-0,-22.055 -3.409,-41.396 -3.409,-62.492c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.787,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
            <path id="path247"
                  d="M351.876,493.388c-0.066,1.32 -0.3,6.575 0.104,8.491c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.134,0.58 0.309,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.759,7.704 0.759,12.121c-0,4.792 3.887,8.679 8.679,8.679c4.791,0 8.683,-3.887 8.683,-8.679c0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.108,-0.483 -0.242,-0.938 -0.4,-1.367c0.067,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.08,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.787 -3.891,-8.679 -8.679,-8.679c-4.791,-0 -8.683,3.892 -8.683,8.679c-0,6.813 -0.758,13.204 -0.758,20.075c-0,1.2 -0.35,3.446 -0.317,5.2c0.033,1.533 0.287,2.913 0.658,4.063Z"
                  style="fill:#000101;"/>
            <path id="path249"
                  d="M381.293,636.733c-0.496,0.771 -6.425,9.984 -7.913,11.471c-4.658,4.659 -16.812,18.942 -20.608,22.742c-3.662,3.662 -21.642,17.817 -25.171,20.512c-12.325,9.405 -29.083,8.521 -37.541,8.521c-8.596,0 -32.671,-4.35 -34.888,-5.087c-4.133,-1.38 -15.504,-5.684 -28.833,-15.996c-7.1,-5.488 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.146,-4.184 0.554,-5.963c0.15,-0.662 0.546,-1.621 0.7,-1.987c3.875,-2.3 5.367,-7.246 3.321,-11.338c-2.142,-4.283 -7.359,-6.025 -11.646,-3.883c-3.304,1.654 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.063 -2.554,14.642c0,8.758 3.034,25.675 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.38,5.984c10.895,-0 32.204,0.029 48.075,-12.084c3.783,-2.887 22.987,-18.112 26.912,-22.037c3.8,-3.796 15.95,-18.079 20.608,-22.738c1.875,-1.879 7.134,-8.183 10.113,-13.704c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.679 -8.679,-8.679c-4.591,0 -8.354,3.571 -8.658,8.083Z"
                  style="fill:#000101;"/>
            <path id="path251"
                  d="M60.764,590.279c-4.784,4.254 -10.554,7.613 -14.354,12.767c-3.838,5.208 -5.667,12.379 -8.68,18.483c-3.616,7.321 -9.387,17.638 -13.02,25.45c-3.259,7 -6.667,15.009 -8.788,21.425c-1.833,5.538 -2.529,11.392 -3.942,17.054c-1.716,6.884 -4.645,16.109 -6.362,24.242c-1.713,8.104 -3.063,16.304 -3.938,24.542c-0.908,8.533 -2.125,17.783 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.909"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
            <path id="path253"
                  d="M541.201,595.429c5.179,1.904 15.542,5.713 19.746,12.209c5.058,7.825 8.108,23.662 10.604,34.725c2.342,10.383 3.704,21.008 4.371,31.629c0.729,11.575 0.213,25.212 0,37.812c-0.221,13.442 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.641,16.517 -6.062,21.212"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <g id="electron"><circle cx="350.23" cy="595.858" r="425.93" style="fill:url(#_Radial3);"/>
            <g id="g272"><path id="path262" d="M261.039,456.921c-0,21.096 3.408,40.437 3.408,62.491c0,4.792 3.892,8.684 8.683,8.684c4.788,-0 8.68,-3.892 8.68,-8.684c-0,-22.054 -3.409,-41.395 -3.409,-62.491c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.788,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
              <path id="path264"
                    d="M402.272,489.283c-0.067,1.321 -0.3,6.575 0.104,8.496c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.133,0.58 0.308,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.758,7.704 0.758,12.121c0,4.792 3.888,8.679 8.68,8.679c4.791,0 8.683,-3.887 8.683,-8.679c-0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.109,-0.483 -0.242,-0.938 -0.4,-1.367c0.066,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.079,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c-0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.792 -3.891,-8.679 -8.679,-8.679c-4.792,-0 -8.683,3.887 -8.683,8.679c-0,6.813 -0.759,13.204 -0.759,20.075c0,1.196 -0.35,3.446 -0.316,5.2c0.033,1.529 0.283,2.913 0.658,4.058Z"
                    style="fill:#000101;"/>
              <path id="path266"
                    d="M431.689,632.629c-0.496,0.775 -6.425,9.988 -7.913,11.475c-4.658,4.658 -16.812,18.942 -20.608,22.742c-3.663,3.662 -21.642,17.816 -25.171,20.508c-12.325,9.408 -29.083,8.525 -37.542,8.525c-8.595,0 -32.67,-4.35 -34.887,-5.092c-4.133,-1.375 -15.504,-5.683 -28.833,-15.991c-7.1,-5.492 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.145,-4.184 0.554,-5.967c0.15,-0.658 0.546,-1.617 0.7,-1.988c3.875,-2.3 5.366,-7.241 3.321,-11.333c-2.142,-4.287 -7.359,-6.025 -11.646,-3.883c-3.304,1.65 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.062 -2.554,14.642c0,8.754 3.033,25.67 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.379,5.984c10.892,-0 32.205,0.029 48.075,-12.084c3.784,-2.887 22.988,-18.112 26.913,-22.037c3.8,-3.8 15.95,-18.084 20.608,-22.742c1.875,-1.875 7.134,-8.179 10.113,-13.7c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.683 -8.679,-8.683c-4.592,-0 -8.354,3.571 -8.658,8.083Z"
                    style="fill:#000101;"/>
              <path id="path268"
                    d="M111.16,586.175c-4.784,4.258 -10.555,7.612 -14.355,12.767c-3.837,5.208 -5.666,12.383 -8.679,18.483c-3.616,7.325 -9.387,17.642 -13.021,25.454c-3.258,6.996 -6.666,15.008 -8.787,21.421c-1.833,5.542 -2.529,11.396 -3.942,17.058c-1.716,6.884 -4.646,16.109 -6.362,24.238c-1.713,8.108 -3.063,16.304 -3.938,24.546c-0.908,8.533 -2.125,17.779 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.904"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
              <path id="path270"
                    d="M591.597,591.329c5.179,1.904 15.542,5.708 19.746,12.208c5.058,7.821 8.108,23.663 10.604,34.721c2.342,10.384 3.704,21.013 4.371,31.634c0.729,11.575 0.212,25.212 -0,37.812c-0.221,13.438 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.642,16.517 -6.062,21.208"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
        <g id="electronGroupRight"><g id="electrono" serif:id="electrono"><g id="g2381" serif:id="g238"><circle cx="394.947" cy="602.488" r="425.93" style="fill:url(#_Radial4);"/><path
            id="path2221" serif:id="path222"
            d="M367.655,235.392l-149.25,-0l176.542,-235.392l176.542,235.392l-149.25,-0l-0,684.746c-0,15.062 -12.229,27.291 -27.292,27.291c-15.062,0 -27.292,-12.229 -27.292,-27.291l0,-684.746Z"
            style="fill:#d55e00;"/><g id="g2361" serif:id="g236"><path id="path2261" serif:id="path226" d="M305.755,463.55c0,21.096 3.409,40.438 3.409,62.492c-0,4.791 3.887,8.679 8.679,8.679c4.792,-0 8.679,-3.888 8.679,-8.679c0,-22.055 -3.408,-41.396 -3.408,-62.492c-0,-4.792 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.891 -8.68,8.683Z" style="fill:#000101;"/>
          <path id="path2281" serif:id="path228"
                d="M446.989,495.913c-0.071,1.32 -0.304,6.575 0.1,8.491c0.141,0.667 0.329,1.284 0.554,1.859c-0.067,1.366 -0.108,3.275 0.096,4.15c0.133,0.579 0.308,1.125 0.525,1.633c-0.042,0.908 -0.1,2.404 -0.1,3.012c-0,4.025 0.754,7.7 0.754,12.121c-0,4.788 3.892,8.679 8.683,8.679c4.792,0 8.679,-3.891 8.679,-8.679c0,-4.421 -0.758,-8.096 -0.758,-12.121c0,-1.741 0.217,-5.229 -0.217,-7.158c-0.108,-0.483 -0.245,-0.942 -0.4,-1.367c0.067,-1.375 0.113,-3.354 -0.095,-4.254c-0.155,-0.687 -0.375,-1.325 -0.642,-1.912c0.075,-1.175 0.212,-3.525 0.2,-4.796c-0.017,-1.675 -0.267,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.604 0.296,-4.521c-0,-6.867 0.754,-13.262 0.754,-20.071c-0,-4.791 -3.888,-8.683 -8.679,-8.683c-4.792,-0 -8.68,3.892 -8.68,8.683c0,6.809 -0.758,13.204 -0.758,20.071c0,1.2 -0.354,3.45 -0.317,5.204c0.034,1.529 0.284,2.913 0.659,4.059Z"
                style="fill:#000101;"/>
          <path id="path2301" serif:id="path230"
                d="M476.405,639.258c-0.495,0.775 -6.425,9.984 -7.916,11.475c-4.659,4.659 -16.809,18.942 -20.609,22.738c-3.662,3.666 -21.637,17.817 -25.17,20.512c-12.325,9.409 -29.08,8.525 -37.542,8.525c-8.596,0 -32.667,-4.354 -34.888,-5.091c-4.133,-1.38 -15.504,-5.684 -28.829,-15.992c-7.1,-5.492 -8.179,-15.9 -8.179,-21.129c0,-2.138 0.15,-4.183 0.554,-5.967c0.15,-0.658 0.546,-1.616 0.704,-1.987c3.871,-2.3 5.367,-7.242 3.321,-11.338c-2.141,-4.283 -7.362,-6.021 -11.646,-3.879c-3.304,1.65 -5.979,4.521 -7.741,8.525c-1.7,3.867 -2.55,9.067 -2.55,14.646c-0,8.754 3.033,25.671 14.912,34.862c15.679,12.125 29.1,17.109 33.967,18.729c2.567,0.855 30.425,5.98 40.375,5.98c10.896,-0 32.208,0.029 48.075,-12.084c3.783,-2.887 22.992,-18.112 26.917,-22.033c3.795,-3.8 15.95,-18.083 20.604,-22.742c1.879,-1.875 7.137,-8.179 10.116,-13.7c1.909,-3.537 2.863,-6.966 2.863,-9.454c-0,-4.787 -3.892,-8.679 -8.679,-8.679c-4.592,-0 -8.354,3.571 -8.659,8.083Z"
                style="fill:#000101;"/>
          <path id="path2321" serif:id="path232"
                d="M155.876,592.804c-4.787,4.254 -10.558,7.613 -14.358,12.767c-3.838,5.208 -5.663,12.379 -8.679,18.483c-3.617,7.321 -9.388,17.638 -13.021,25.45c-3.254,7 -6.667,15.013 -8.788,21.425c-1.833,5.542 -2.525,11.396 -3.937,17.058c-1.717,6.884 -4.646,16.109 -6.363,24.238c-1.712,8.108 -3.062,16.304 -3.941,24.542c-0.909,8.537 -2.121,17.783 -1.513,26.666c0.654,9.592 3.634,20.605 5.454,30.904"
                style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
          <path id="path2341" serif:id="path234"
                d="M636.31,597.954c5.183,1.904 15.545,5.713 19.745,12.213c5.059,7.821 8.109,23.662 10.609,34.721c2.341,10.383 3.7,21.008 4.371,31.633c0.729,11.575 0.208,25.208 -0,37.812c-0.225,13.438 -0.159,31.442 -1.342,42.817c-0.9,8.654 -3.788,17.675 -5.758,25.454c-1.805,7.125 -4.642,16.517 -6.059,21.209"
                style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <g id="electronu" serif:id="electronu"><g id="g2571" serif:id="g257"><circle cx="298.147" cy="595.429" r="425.93" style="fill:url(#_Radial5);"/><path id="path2411"
                                                                                                                                                                serif:id="path241"
                                                                                                                                                                d="M270.855,962.525l0,-684.746c0,-15.062 12.23,-27.291 27.292,-27.291c15.063,-0 27.292,12.229 27.292,27.291l-0,684.746l149.25,0l-176.542,235.392l-176.546,-235.392l149.254,0Z"
                                                                                                                                                                style="fill:#359b73;"/><g
              id="g2551" serif:id="g255"><path id="path2451" serif:id="path245" d="M210.643,461.021c-0,21.096 3.408,40.437 3.408,62.492c0,4.791 3.892,8.683 8.684,8.683c4.787,-0 8.679,-3.892 8.679,-8.683c-0,-22.055 -3.409,-41.396 -3.409,-62.492c0,-4.792 -3.891,-8.679 -8.683,-8.679c-4.787,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
            <path id="path2471" serif:id="path247"
                  d="M351.876,493.388c-0.066,1.32 -0.3,6.575 0.104,8.491c0.138,0.663 0.325,1.284 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.134,0.58 0.309,1.121 0.525,1.63c-0.037,0.912 -0.1,2.408 -0.1,3.012c0,4.025 0.759,7.704 0.759,12.121c-0,4.792 3.887,8.679 8.679,8.679c4.791,0 8.683,-3.887 8.683,-8.679c0,-4.417 -0.758,-8.096 -0.758,-12.121c-0,-1.742 0.216,-5.225 -0.221,-7.158c-0.108,-0.483 -0.242,-0.938 -0.4,-1.367c0.067,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.08,-1.179 0.213,-3.529 0.2,-4.8c-0.016,-1.671 -0.266,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c0,-6.871 0.758,-13.262 0.758,-20.075c0,-4.787 -3.891,-8.679 -8.679,-8.679c-4.791,-0 -8.683,3.892 -8.683,8.679c-0,6.813 -0.758,13.204 -0.758,20.075c-0,1.2 -0.35,3.446 -0.317,5.2c0.033,1.533 0.287,2.913 0.658,4.063Z"
                  style="fill:#000101;"/>
            <path id="path2491" serif:id="path249"
                  d="M381.293,636.733c-0.496,0.771 -6.425,9.984 -7.913,11.471c-4.658,4.659 -16.812,18.942 -20.608,22.742c-3.662,3.662 -21.642,17.817 -25.171,20.512c-12.325,9.405 -29.083,8.521 -37.541,8.521c-8.596,0 -32.671,-4.35 -34.888,-5.087c-4.133,-1.38 -15.504,-5.684 -28.833,-15.996c-7.1,-5.488 -8.175,-15.896 -8.175,-21.129c-0,-2.134 0.146,-4.184 0.554,-5.963c0.15,-0.662 0.546,-1.621 0.7,-1.987c3.875,-2.3 5.367,-7.246 3.321,-11.338c-2.142,-4.283 -7.359,-6.025 -11.646,-3.883c-3.304,1.654 -5.979,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.063 -2.554,14.642c0,8.758 3.034,25.675 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.38,5.984c10.895,-0 32.204,0.029 48.075,-12.084c3.783,-2.887 22.987,-18.112 26.912,-22.037c3.8,-3.796 15.95,-18.079 20.608,-22.738c1.875,-1.879 7.134,-8.183 10.113,-13.704c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.679 -8.679,-8.679c-4.591,0 -8.354,3.571 -8.658,8.083Z"
                  style="fill:#000101;"/>
            <path id="path2511" serif:id="path251"
                  d="M60.764,590.279c-4.784,4.254 -10.554,7.613 -14.354,12.767c-3.838,5.208 -5.667,12.379 -8.68,18.483c-3.616,7.321 -9.387,17.638 -13.02,25.45c-3.259,7 -6.667,15.009 -8.788,21.425c-1.833,5.538 -2.529,11.392 -3.942,17.054c-1.716,6.884 -4.645,16.109 -6.362,24.242c-1.713,8.104 -3.063,16.304 -3.938,24.542c-0.908,8.533 -2.125,17.783 -1.516,26.662c0.658,9.596 3.637,20.604 5.454,30.909"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
            <path id="path2531" serif:id="path253"
                  d="M541.201,595.429c5.179,1.904 15.542,5.713 19.746,12.209c5.058,7.825 8.108,23.662 10.604,34.725c2.342,10.383 3.704,21.008 4.371,31.629c0.729,11.575 0.213,25.212 0,37.812c-0.221,13.442 -0.158,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.641,16.517 -6.062,21.212"
                  style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
          <g id="electron" serif:id="electron"><circle cx="349.884" cy="595.429" r="425.93" style="fill:url(#_Radial6);"/>
            <g id="g2721" serif:id="g272"><path id="path2621" serif:id="path262" d="M260.693,456.492c-0,21.096 3.408,40.437 3.408,62.491c-0,4.792 3.892,8.684 8.683,8.684c4.788,-0 8.679,-3.892 8.679,-8.684c0,-22.054 -3.408,-41.395 -3.408,-62.491c0,-4.792 -3.892,-8.679 -8.683,-8.679c-4.788,-0 -8.679,3.887 -8.679,8.679Z" style="fill:#000101;"/>
              <path id="path2641" serif:id="path264"
                    d="M401.926,488.854c-0.067,1.321 -0.3,6.575 0.104,8.496c0.138,0.663 0.325,1.283 0.55,1.854c-0.062,1.371 -0.104,3.275 0.096,4.154c0.133,0.58 0.308,1.121 0.525,1.63c-0.038,0.912 -0.1,2.408 -0.1,3.012c-0,4.025 0.758,7.704 0.758,12.121c0,4.792 3.888,8.679 8.679,8.679c4.792,0 8.684,-3.887 8.684,-8.679c-0,-4.417 -0.759,-8.096 -0.759,-12.121c0,-1.742 0.217,-5.225 -0.22,-7.158c-0.109,-0.484 -0.242,-0.938 -0.4,-1.367c0.066,-1.375 0.112,-3.354 -0.092,-4.254c-0.158,-0.683 -0.375,-1.321 -0.646,-1.908c0.079,-1.18 0.213,-3.53 0.2,-4.8c-0.017,-1.671 -0.267,-3.167 -0.654,-4.4c0.079,-0.925 0.296,-3.6 0.296,-4.517c-0,-6.871 0.758,-13.263 0.758,-20.075c0,-4.792 -3.892,-8.679 -8.679,-8.679c-4.792,-0 -8.683,3.887 -8.683,8.679c-0,6.812 -0.759,13.204 -0.759,20.075c0,1.196 -0.35,3.446 -0.316,5.2c0.033,1.529 0.283,2.912 0.658,4.058Z"
                    style="fill:#000101;"/>
              <path id="path2661" serif:id="path266"
                    d="M431.343,632.2c-0.496,0.775 -6.425,9.988 -7.913,11.475c-4.658,4.658 -16.812,18.942 -20.608,22.742c-3.663,3.662 -21.642,17.816 -25.171,20.508c-12.325,9.408 -29.083,8.525 -37.542,8.525c-8.596,0 -32.671,-4.35 -34.887,-5.092c-4.134,-1.375 -15.504,-5.683 -28.834,-15.991c-7.1,-5.492 -8.175,-15.896 -8.175,-21.129c0,-2.134 0.146,-4.184 0.555,-5.967c0.15,-0.658 0.545,-1.617 0.7,-1.988c3.875,-2.3 5.366,-7.241 3.32,-11.333c-2.141,-4.287 -7.358,-6.025 -11.645,-3.883c-3.305,1.65 -5.98,4.525 -7.738,8.529c-1.7,3.862 -2.554,9.062 -2.554,14.642c-0,8.754 3.033,25.67 14.917,34.862c15.679,12.129 29.1,17.108 33.962,18.729c2.567,0.859 30.425,5.984 40.379,5.984c10.892,-0 32.204,0.029 48.075,-12.084c3.784,-2.887 22.988,-18.112 26.913,-22.037c3.8,-3.8 15.95,-18.084 20.608,-22.742c1.875,-1.875 7.133,-8.179 10.113,-13.7c1.908,-3.537 2.862,-6.962 2.862,-9.45c0,-4.792 -3.887,-8.683 -8.679,-8.683c-4.592,-0 -8.354,3.571 -8.658,8.083Z"
                    style="fill:#000101;"/>
              <path id="path2681" serif:id="path268"
                    d="M110.813,585.746c-4.783,4.258 -10.554,7.612 -14.354,12.767c-3.837,5.208 -5.666,12.383 -8.679,18.483c-3.617,7.325 -9.387,17.642 -13.021,25.454c-3.258,6.996 -6.666,15.008 -8.787,21.421c-1.834,5.542 -2.529,11.396 -3.942,17.058c-1.717,6.884 -4.646,16.109 -6.362,24.238c-1.713,8.108 -3.063,16.304 -3.938,24.546c-0.908,8.533 -2.125,17.779 -1.517,26.662c0.659,9.596 3.638,20.604 5.455,30.904"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/>
              <path id="path2701" serif:id="path270"
                    d="M591.251,590.9c5.179,1.904 15.542,5.708 19.746,12.208c5.058,7.821 8.108,23.663 10.604,34.721c2.342,10.384 3.704,21.013 4.371,31.634c0.729,11.575 0.212,25.212 -0,37.812c-0.221,13.438 -0.159,31.442 -1.342,42.821c-0.9,8.65 -3.787,17.675 -5.754,25.45c-1.808,7.129 -4.642,16.517 -6.063,21.208"
                    style="fill:none;stroke:#000101;stroke-width:13.75px;"/></g></g></g>
        <rect id="shootButtonPos" x="6782.49" y="6111.95" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="timeButtonPos" x="10565.9" y="6111.95" width="177.777" height="177.777" style="fill:none;"/>
        <rect id="spinButtonPos" x="2558.71" y="6111.95" width="177.777" height="177.777" style="fill:none;"/>
        <g id="magnetr"><g><path d="M857.271,1710.74l-625.78,-0l0,419.264l625.78,0l0,-419.264Zm0,-0l-625.78,-0l-211.357,-111.673l625.781,-0l211.356,111.673Zm-837.138,-111.673l211.357,111.673l-0,419.264l-211.357,-111.673l0,-419.264Z" style="fill:#03458f;stroke:#010001;stroke-width:13.64px;"/><path
            id="path217"
            d="M467.453,1958.52c-0.067,-2.906 0.923,-5.271 2.975,-7.106c2.052,-1.831 4.576,-2.748 7.566,-2.748c3.411,-0 6.402,1.937 8.976,5.811c3.545,5.251 6.715,8.814 9.495,10.68c5.914,3.875 14.506,5.807 25.775,5.807c10.787,-0 20.805,-2.314 30.059,-6.948c11.823,-5.945 17.737,-14.208 17.737,-24.787c0,-8.711 -4.97,-15.594 -14.921,-20.64c-8.418,-4.354 -18.82,-6.704 -31.202,-7.051c-10.993,-0.418 -20.349,-2.803 -28.074,-7.157c-9.879,-5.603 -14.819,-13.622 -14.819,-24.062c0,-12.307 7.028,-23.542 21.082,-33.707c13.424,-9.615 27.304,-14.417 41.636,-14.417c6.75,0 14.367,1.142 22.857,3.421c11.269,2.972 16.906,6.775 16.906,11.409c-0,6.087 -3.129,9.13 -9.392,9.13c-2.785,0 -7.653,-0.744 -14.609,-2.233c-6.96,-1.488 -12.351,-2.197 -16.178,-2.126c-10.853,0.138 -20.071,2.799 -27.652,7.989c-7.792,5.322 -11.69,11.786 -11.69,19.392c-0,5.74 5.15,9.783 15.444,12.133c3.827,0.902 11.239,1.733 22.231,2.493c15.932,1.172 28.381,6.153 37.358,14.932c8.212,8.023 12.316,17.806 12.316,29.353c-0,16.456 -7.653,29.593 -22.96,39.411c-13.29,8.508 -28.699,12.76 -46.231,12.76c-12.731,-0 -24.386,-2.422 -34.962,-7.259c-12.937,-5.95 -19.513,-14.106 -19.723,-24.48Z"
            style="fill:#fff;fill-rule:nonzero;"/></g>
          <g><path d="M877.403,112.08l-652.984,0l0,330.6l652.984,-0l0,-330.6Zm-112.21,384.516l-652.984,0l112.21,-53.916l652.984,-0l-112.21,53.916Zm-762.541,-496.768l221.769,112.253l-0,330.599l-113.774,53.917l-110.647,-165.583l2.652,-331.187l-0,0.001Zm652.984,-0l-652.984,-0l221.769,112.253l652.983,-0l-221.768,-112.253Z" style="fill:#d40000;stroke:#010001;stroke-width:13.64px;"/>
            <path id="magnetN"
                  d="M623.194,334.953c0,3.318 -0.554,8.849 -1.667,16.593c-1.113,6.984 -4.837,10.476 -11.167,10.476c-3.826,0 -8.386,-2.488 -13.669,-7.468c-28.32,-26.621 -60.81,-65.028 -97.475,-115.227l-0.518,23.542l-0.313,23.649c-0,5.735 0.118,14.345 0.364,25.826c0.241,11.475 0.364,20.121 0.364,25.927c0,18.597 -3.616,27.901 -10.853,27.901c-3.827,-0 -6.853,-1.214 -9.08,-3.63c-2.015,-2.146 -3.026,-4.705 -3.026,-7.677c0,-2.906 0.226,-7.295 0.677,-13.173c0.452,-5.878 0.682,-10.267 0.682,-13.173c0,-4.282 0.139,-10.695 0.416,-19.239c0.277,-8.539 0.416,-14.952 0.416,-19.239c-0,-4.563 -0.103,-11.461 -0.313,-20.688c-0.205,-9.232 -0.313,-16.129 -0.313,-20.691c-0,-4.359 -0.416,-10.839 -1.252,-19.449c-0.836,-8.61 -1.251,-15.09 -1.251,-19.448c-0,-3.181 1.374,-6.082 4.124,-8.712c2.744,-2.626 5.857,-3.941 9.335,-3.941c3.688,-0 8.248,4.012 13.675,12.031c17.322,25.79 32.905,47.227 46.749,64.304c16.492,20.259 34.578,39.621 54.27,58.08c0.205,-2.972 0.205,-7.361 0,-13.168l-0.313,-13.071c0,-30.352 -1.185,-54.521 -3.55,-72.496c-0.276,-1.8 -1.215,-5.429 -2.815,-10.889c-1.396,-4.706 -2.088,-8.366 -2.088,-10.996c-0,-8.019 3.688,-12.031 11.059,-12.031c12.105,-0 18.158,22.436 18.158,67.312c0,7.677 -0.103,19.137 -0.313,34.38c-0.205,15.247 -0.313,26.707 -0.313,34.385Z"
                  style="fill:#fff;fill-rule:nonzero;"/></g>
          <rect x="0" y="0" width="884.569" height="2130" style="fill:#ebebeb;fill-opacity:0;"/></g>
        <g id="magnetl"><g><path d="M27.295,1710.77l625.724,-0l0,419.226l-625.724,-0l0,-419.226Zm0,-0l625.724,-0l211.338,-111.663l-625.724,-0l-211.338,111.663Zm837.063,-111.663l-211.338,111.663l0,419.226l211.338,-111.663l0,-419.226Z" style="fill:#03458f;stroke:#010001;stroke-width:13.64px;"/><path
            id="path2171" serif:id="path217"
            d="M293.217,1958.54c-0.066,-2.906 0.924,-5.271 2.975,-7.106c2.052,-1.83 4.575,-2.748 7.566,-2.748c3.41,0 6.401,1.937 8.975,5.811c3.544,5.251 6.714,8.813 9.494,10.679c5.914,3.874 14.504,5.806 25.773,5.806c10.786,0 20.803,-2.314 30.056,-6.948c11.822,-5.943 17.736,-14.206 17.736,-24.784c-0,-8.711 -4.97,-15.592 -14.921,-20.638c-8.416,-4.354 -18.818,-6.703 -31.199,-7.05c-10.991,-0.418 -20.347,-2.804 -28.071,-7.157c-9.878,-5.602 -14.817,-13.62 -14.817,-24.06c-0,-12.305 7.026,-23.539 21.08,-33.703c13.422,-9.614 27.301,-14.416 41.631,-14.416c6.75,0 14.367,1.142 22.855,3.421c11.268,2.971 16.905,6.774 16.905,11.408c-0,6.086 -3.128,9.129 -9.391,9.129c-2.785,-0 -7.652,-0.745 -14.607,-2.233c-6.96,-1.488 -12.351,-2.197 -16.177,-2.126c-10.853,0.138 -20.07,2.799 -27.65,7.988c-7.791,5.322 -11.689,11.785 -11.689,19.391c0,5.739 5.149,9.782 15.443,12.131c3.826,0.903 11.237,1.733 22.229,2.493c15.931,1.172 28.379,6.152 37.355,14.93c8.211,8.024 12.314,17.806 12.314,29.351c-0,16.455 -7.652,29.59 -22.957,39.408c-13.289,8.507 -28.697,12.758 -46.228,12.758c-12.73,0 -24.383,-2.421 -34.958,-7.258c-12.936,-5.949 -19.511,-14.104 -19.722,-24.477Z"
            style="fill:#fff;fill-rule:nonzero;"/></g>
          <g><path d="M7.165,112.243l652.925,0l0,330.57l-652.925,-0l0,-330.57Zm112.201,384.482l652.925,-0l-112.201,-53.912l-652.925,0l112.201,53.912Zm762.472,-496.724l-221.749,112.243l-0,330.57l113.763,53.911l110.637,-165.567l-2.652,-331.158l0.001,0.001Zm-652.925,-0l652.925,-0l-221.749,112.243l-652.925,-0l221.749,-112.243Z" style="fill:#d40000;stroke:#010001;stroke-width:13.64px;"/>
            <path id="magnetN1" serif:id="magnetN"
                  d="M408.691,335.096c-0,3.318 -0.554,8.849 -1.667,16.592c-1.113,6.983 -4.837,10.475 -11.166,10.475c-3.826,-0 -8.386,-2.488 -13.668,-7.468c-28.317,-26.618 -60.804,-65.022 -97.466,-115.216l-0.518,23.539l-0.313,23.648c-0,5.734 0.118,14.344 0.364,25.823c0.241,11.474 0.364,20.119 0.364,25.925c0,18.595 -3.616,27.898 -10.852,27.898c-3.827,-0 -6.853,-1.213 -9.079,-3.629c-2.016,-2.146 -3.026,-4.705 -3.026,-7.677c-0,-2.906 0.226,-7.294 0.677,-13.171c0.451,-5.878 0.682,-10.267 0.682,-13.172c0,-4.282 0.139,-10.694 0.415,-19.238c0.277,-8.538 0.416,-14.95 0.416,-19.237c0,-4.562 -0.102,-11.459 -0.313,-20.686c-0.205,-9.231 -0.312,-16.128 -0.312,-20.69c-0,-4.358 -0.416,-10.837 -1.252,-19.446c-0.836,-8.61 -1.251,-15.089 -1.251,-19.447c-0,-3.18 1.374,-6.081 4.123,-8.711c2.744,-2.626 5.857,-3.941 9.335,-3.941c3.687,0 8.247,4.012 13.674,12.03c17.32,25.788 32.902,47.223 46.745,64.299c16.49,20.257 34.574,39.617 54.264,58.074c0.205,-2.971 0.205,-7.36 0,-13.166l-0.312,-13.07c-0,-30.35 -1.185,-54.517 -3.55,-72.49c-0.277,-1.799 -1.215,-5.429 -2.815,-10.888c-1.395,-4.705 -2.088,-8.365 -2.088,-10.995c-0,-8.018 3.688,-12.03 11.058,-12.03c12.105,0 18.157,22.434 18.157,67.306c-0,7.677 -0.103,19.135 -0.313,34.377c-0.205,15.246 -0.313,26.705 -0.313,34.382Z"
                  style="fill:#fff;fill-rule:nonzero;"/></g>
          <rect x="-0" y="0.001" width="884.489" height="2130" style="fill:#ebebeb;fill-opacity:0;"/></g>
        <defs><radialGradient id="_Radial1" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,394.947,608.501)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/><stop
            offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/><stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/><stop offset="1"
                                                                                                                                                style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
          <radialGradient id="_Radial2" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,298.147,601.443)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
            <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
            <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
            <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
          <radialGradient id="_Radial3" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,350.23,601.872)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
            <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
            <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
            <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
          <radialGradient id="_Radial4" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,394.947,608.501)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
            <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
            <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
            <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
          <radialGradient id="_Radial5" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,298.147,601.443)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
            <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
            <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
            <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient>
          <radialGradient id="_Radial6" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(333.651,-270.663,270.663,333.651,349.884,601.443)"><stop offset="0" style="stop-color:#1f59a7;stop-opacity:1"/>
            <stop offset="0.55" style="stop-color:#4e72be;stop-opacity:0.96"/>
            <stop offset="0.77" style="stop-color:#4e72be;stop-opacity:0.23"/>
            <stop offset="1" style="stop-color:#4e72be;stop-opacity:0"/></radialGradient></defs></svg>
      <div class="measuredTime" ref="measuredTime">
        <div class="left"></div>
        <div class="right"></div>
      </div>
      <div class="time" ref="time"></div>
    </div>
    <button class="absoluteButton red" id="shootButton" @click="shootElectrons" :disabled="state !== 'initialized'">
      {{ $t('simulation3.disintegrateCooperPair') }}
    </button>
    <button class="absoluteButton" id="timeButton" @click="toggleTime" :disabled="state !== 'initialized'">
      {{ $t(showTime ? 'simulation3.hideTime' : 'simulation3.showTime') }}
    </button>
    <button class="absoluteButton" id="spinButton" @click="toggleSpin" :disabled="state === 'animating'">
      {{ $t(spinVisible ? 'simulation2.hideSpin' : 'simulation2.showSpin') }}
    </button>
  </div>
</template>

<script lang="ts" setup>
import {ref, Ref, onMounted} from "vue";
import {moveElementAlongPathElement, putSvgToTranslate} from "@/scripts/svgAnimation";
import {makeDraggable, makeDropZoneDropTarget} from "@/scripts/makeDraggablev2";
import {
  addTranslate,
  centerSvgEl,
  generateSvgUsingTemplate,
  getCenterOfSVGEl,
  getSvgCenter, getSvgCenter2
} from "@/scripts/positioning";

import {useI18n} from 'vue-i18n'

const {t, locale} = useI18n() // `t` method for translation, `locale` for the current language


// const simulation: Ref<SVGSVGElement | null> = ref(null);
const loading = ref(true);
const time: Ref<null | HTMLElement> = ref(null);
const state: Ref<'initialized' | 'shot' | 'animating'> = ref('initialized');
const elements: { [key: string]: SVGSVGElement | null } = {
  magnetl: null,
  magnetr: null,
  electronGroupRight: null,
  electronGroupLeft: null,
  pathTopLeft: null,
  pathTopRight: null,
  dropr0: null,
  dropl0: null,
  baseDropZone: null,
  dropl1: null,
  dropl2: null,
  dropl3: null,
  dropr1: null,
  dropr2: null,
  dropr3: null,
  cooperframe: null,
  simulation: null
}

let electronLeft: SVGSVGElement;
let electronRight: SVGSVGElement;

function moveElAlongPath() {
  moveDotAlongPath(electronLeft!);
}

function moveDotAlongPath(electron: SVGSVGElement) {
  // centerGroup(magnet!);
  moveElementAlongPathElement(electron!, (elements.pathTopRight! as unknown) as SVGPathElement, 3);
}


function makeMagnetDraggable(magnet: SVGSVGElement, baseDropZone: SVGSVGElement, dropZones: SVGSVGElement[], dragTargetClass: string) {
  const magnetBasePosition = getCenterOfSVGEl(baseDropZone);
  putSvgToTranslate(magnet, magnetBasePosition);
  (magnet as any).currentPosition = baseDropZone.id;
  makeDraggable(elements.simulation!, magnet, dragTargetClass, () => {
    putSvgToTranslate(magnet, magnetBasePosition!);
  });
  [baseDropZone, ...dropZones].forEach(e => {
    makeDropZoneDropTarget(elements.simulation!, e, dragTargetClass);
  });
  (magnet as any).currentPosition123 = baseDropZone.id;
}


function initializeElectrons() {
  if (!electronLeft) {
    electronLeft = elements.electronGroupLeft!;
  }
  if (!electronRight) {
    electronRight = elements.electronGroupRight!;
  }

  [electronLeft, electronRight].forEach(e => e.classList.remove('up', 'down', 'deceased'))
  const initLeft = ((elements.simulation!.querySelector('#pathLeftStraight') as unknown) as SVGPathElement).getPointAtLength(0);
  const initRight = ((elements.simulation!.querySelector('#pathRightStraight') as unknown) as SVGPathElement).getPointAtLength(0);
  putSvgToTranslate(electronLeft, initLeft);
  putSvgToTranslate(electronRight, initRight);
  elements.simulation!.appendChild(electronLeft);
  elements.simulation!.appendChild(electronRight);
  elements.cooperframe!.style.visibility = 'visible';
  state.value = 'initialized';
}

function toggleMagnetDisable() {
  elements.magnetl?.classList.toggle('disabled');
  elements.magnetr?.classList.toggle('disabled');
}

let timeIntervalId = -1;

function stopTime() {
  if (showTime.value) {
    // time.value!.textContent = `0${t('simulation3.decimalSeparator')}000s`;
  }
  clearInterval(timeIntervalId);
}

let startDateTime = 0;

function startTime() {
  startDateTime = new Date().getTime();
  timeIntervalId = setInterval(() => {
    const date = new Date();
    const timeInMilliseconds = date.getTime() - startDateTime!;
    const timeString = Math.floor(timeInMilliseconds / 1000) + t('simulation3.decimalSeparator') + String(timeInMilliseconds % 1000).padStart(3, '0') + 's'
    time.value!.textContent = timeString;
  }, 10)
}


function shootElectrons() {
  toggleMagnetDisable();
  state.value = 'animating';
  for (const measuredTime of document.querySelector('.measuredTime')!.children) {
    measuredTime.textContent = '';
  }

  if (showTime.value)
    startTime();
  const magnetLPosition = +(elements.magnetl! as any).currentPosition.slice(-1);
  const magnetRPosition = +(elements.magnetr! as any).currentPosition.slice(-1);

  console.log('magnetLPosition', magnetLPosition, 'magnetRPosition', magnetRPosition)
  const leftSpinUp = Math.random() > 0.5;
  const electronLeftPath: SVGPathElement = magnetLPosition == 0 ? elements.simulation!.querySelector('#pathLeftStraight')! : elements.simulation!.querySelector(`#pathLeft${leftSpinUp ? 'Up' : 'Down'}${magnetLPosition}`)!
  const electronRightPath: SVGPathElement = magnetRPosition == 0 ? elements.simulation!.querySelector('#pathRightStraight')! : elements.simulation!.querySelector(`#pathRight${leftSpinUp ? 'Down' : 'Up'}${magnetRPosition}`)!
  // console.log('electronLeftPath=', electronLeftPath, 'id=', `#pathLeft${leftSpinUp ? 'Up' : 'Down'}${magnetLPosition}`)
  // console.log('electronRightPath=', electronRightPath, 'id=', `#pathRight${leftSpinUp ? 'Up' : 'Down'}${magnetRPosition}`)

  // Note the next 2 lines result in problems with safari and firefox, as they dont have .getComputedStyle(el).transform
  // const leftSpinBorder0 = magnetLPosition == 0 ? 0 : getSvgCenter(elements.magnetl!).x;
  // const rightSpinBorder0 = magnetRPosition == 0 ? Number.POSITIVE_INFINITY : getSvgCenter(elements.magnetr!).x;
  // Workaround
  const leftSpinBorder = magnetLPosition == 0 ? 0 :
      Object.values(elements.magnetl!.transform.baseVal)
          .reduce((a, b) => a + b.matrix.e, 0) + elements.magnetl!.getBBox().width / 2;
  const rightSpinBorder = magnetRPosition == 0 ? Number.POSITIVE_INFINITY :
      Object.values(elements.magnetr!.transform.baseVal)
          .reduce((a, b) => a + b.matrix.e, 0) + elements.magnetr!.getBBox().width / 2;

  const maxPathOfAllPathLengths = Math.max(
      (elements.simulation!.querySelector('#pathRightDown1') as SVGPathElement).getTotalLength(),
      (elements.simulation!.querySelector('#pathRightDown2') as SVGPathElement).getTotalLength(),
      (elements.simulation!.querySelector('#pathRightDown3') as SVGPathElement).getTotalLength()
  );
  const maxPathDuration = 4;
  const speed = maxPathOfAllPathLengths / maxPathDuration;
  const leftPathLength = electronLeftPath.getTotalLength();
  const rightPathLength = electronRightPath.getTotalLength();
  const maxPathLength = Math.max(leftPathLength, rightPathLength);
  const duration = maxPathLength / speed;
  const fps = 120;
  const totalUpdates = Math.ceil(fps * duration);
  let i = 0;
  elements.cooperframe!.style.visibility = 'hidden';

  let spinLResolved = false;
  let spinRResolved = false;

  const interval = setInterval(() => {
    const alpha = i / totalUpdates;
    const length = maxPathLength * alpha;
    const pointElLeftPos = electronLeftPath.getPointAtLength(length);
    const pointElRightPos = electronRightPath.getPointAtLength(length);
    putSvgToTranslate(electronLeft!, pointElLeftPos);
    putSvgToTranslate(electronRight!, pointElRightPos);

    let timeString;

    if (!spinLResolved && pointElLeftPos.x < leftSpinBorder) {
      const date = new Date();
      const timeInMilliseconds = date.getTime() - startDateTime!;
      timeString = t('simulation3.measuredDuration') + ':\n' + Math.floor(timeInMilliseconds / 1000) + t('simulation3.decimalSeparator') + (timeInMilliseconds % 1000) + `s`
      if (showTime.value)
        showTimeOfMeasurement('l' + magnetLPosition, timeString);
      if (!spinRResolved) {
        electronLeft?.classList.add(leftSpinUp ? 'up' : 'down');
        electronRight?.classList.add(leftSpinUp ? 'down' : 'up');
      }
      spinLResolved = true
    }

    if (!spinRResolved && pointElRightPos.x > rightSpinBorder) {
      if (!timeString) {
        const date = new Date();
        const timeInMilliseconds = date.getTime() - startDateTime!;
        timeString = t('simulation3.measuredDuration') + ':\n' + Math.floor(timeInMilliseconds / 1000) + t('simulation3.decimalSeparator') + (timeInMilliseconds % 1000) + `s`
      }
      if (showTime.value)
        showTimeOfMeasurement('r' + magnetRPosition, timeString);
      if (!spinLResolved) {
        electronLeft?.classList.add(leftSpinUp ? 'up' : 'down');
        electronRight?.classList.add(leftSpinUp ? 'down' : 'up');
      }
      spinRResolved = true
    }


    if (length >= leftPathLength) electronLeft?.classList.add('deceased');
    if (length >= rightPathLength) electronRight?.classList.add('deceased');
    // console.log('speed=', speed)
    // console.log('length=', length)
    // console.log('rightPathLength=', rightPathLength)
    // console.log('leftPathLength=', leftPathLength)
    i++;
    if (i > totalUpdates) {
      clearInterval(interval);
      stopTime();
      toggleMagnetDisable(); // TODO after animation
      setTimeout(() => {
        initializeElectrons()
        state.value = 'initialized';
      }, 1000)
    }
  }, 1000 / fps)
}

let spinVisible = ref(false);

function toggleSpin() {
  spinVisible.value = !spinVisible.value;
  Array.from(elements.simulation!.querySelectorAll('#electronGroupLeft,#electronGroupRight')).forEach(el => el.classList.toggle('spin'))
}

let showTime = ref(false);

function toggleTime() {
  showTime.value = !showTime.value;
  if (showTime.value) {
    time.value!.textContent = `0${t('simulation3.decimalSeparator')}000s`;
  } else {
    time.value!.textContent = '';
    for (const measuredTime of document.querySelector('.measuredTime')!.children) {
      measuredTime.textContent = '';
    }
  }
}

function positionButtonsOnSimulation() {
  for (let buttonName of ['spin', 'shoot', 'time']) {
    const button: HTMLElement | null = document.querySelector('#' + buttonName + 'Button');
    if (button) {
      const posEl: SVGSVGElement = document.querySelector('#' + buttonName + 'ButtonPos')!;
      const {x, y, width, height} = posEl.getBoundingClientRect();
      button.style.left = x + width / 2 + 'px';
      button.style.top = y + height / 2 + 'px';
    }
  }
}


// function showTimeOfMeasurement(pos: string, timeString: string) {
//   console.log('showTimeOfMeasurement')
//   // create el
//   const el = document.createElement('div');
//   el.textContent = timeString
//   // attach element
//   const posEl: SVGSVGElement = document.querySelector(`#time${pos}`)!;
//   const {x, y, width, height} = posEl.getBoundingClientRect();
//   el.style.left = x + width / 2 + 'px';
//   el.style.top = y + height / 2 + 'px';
//   el.style.position = 'absolute';
//   el.style.transform = 'translate(-50%, -50%)';
//   el.style.whiteSpace = 'pre-wrap';
//   el.style.textAlign = 'center';
//   el.className = 'time-left'
//
//   document.querySelector('#sim3-container')!.appendChild(el);
//   //saveElement
//   timeOfMeasurements.push(el);
// }

function showTimeOfMeasurement(pos: string, timeString: string) {
  console.log('showTimeOfMeasurement')
  // create el
  const el = document.querySelector(`.measuredTime ${pos.startsWith('l') ? '.left' : '.right'}`) as HTMLElement;
  el.textContent = timeString
  // attach element

  const posEl: SVGSVGElement = document.querySelector(`#time${pos}`)!;
  const parentElPos = document.querySelector('#simulation')!.getBoundingClientRect()
  const {x, y, width, height} = posEl.getBoundingClientRect();
  el.style.left = x - parentElPos.x + width / 2 + 'px';
  el.style.top = y - parentElPos.y + height / 2 + 'px';
}

onMounted(() => {
  for (let key in elements) {
    elements[key] = document.querySelector('#' + key);
  }

  // Initialize magnets
  addTranslate(elements.simulation!, elements.magnetl!); // FIRST add Translate, that is supposed to be changed later for positioning
  addTranslate(elements.simulation!, elements.magnetr!);
  centerSvgEl(elements.simulation!, elements.magnetl!) // THEN put centering in the back of it
  centerSvgEl(elements.simulation!, elements.magnetr!)
  makeMagnetDraggable(elements.magnetl!, elements.dropl0!, [elements.dropl1!, elements.dropl2!, elements.dropl3!], 'dragL');
  makeMagnetDraggable(elements.magnetr!, elements.dropr0!, [elements.dropr1!, elements.dropr2!, elements.dropr3!], 'dragR');
  // (elements.simulation!.querySelector('#electronGroup')! as HTMLElement).style.visibility = 'hidden';
  addTranslate(elements.simulation!, elements.electronGroupLeft!);
  centerSvgEl(elements.simulation!, elements.electronGroupLeft!);
  addTranslate(elements.simulation!, elements.electronGroupRight!);
  centerSvgEl(elements.simulation!, elements.electronGroupRight!);
  initializeElectrons();
  positionButtonsOnSimulation();
  addEventListener("resize", (event) => positionButtonsOnSimulation());
  loading.value = false; // TODO
})

</script>

<style scoped lang="scss">

#electronGroupLeft, #electronGroupRight {
  &.deceased {
    opacity: 0;
  }

  #electrono, #electronu, #electron {
    transition: opacity 0.5s;
  }

  #electrono, #electronu {
    opacity: 0;
  }

  #electron {
    opacity: 1;
  }

  &.spin {
    #electrono, #electronu {
      opacity: 0.5;
    }

    #electron {
      opacity: 0;
    }


    &.down {
      #electron, #electrono {
        opacity: 0;
      }

      #electronu {
        opacity: 1 !important;
      }
    }

    &.up {
      #electron, #electronu {
        opacity: 0;
      }

      #electrono {
        opacity: 1;
      }
    }
  }

}

#simulation {
  /*max-width: 100%;*/
  /*max-height: 80vh;*/
}

#magnetl, #magnetr {
  cursor: grab;
}

#magnetl.disabled, #magnetr.disabled {
  cursor: not-allowed;
}

.time {
  font-family: monospace;
  font-size: 48px;
  color: rgb(4, 13, 65);
}

@media only screen and (min-width: 769px) {
  .time {
    position: absolute;
    top: 10px;
    left: 10px;
  }
}

@media (max-width: 768px) {
  .time {
    position: relative;
    //border: 1px solid red;
    min-height: 1.3em;
    text-align: center;
  }
}

.simulation-container {
  position: relative;
}


button {
  z-index: 10;
}


.measuredTime {
  display: flex;
  flex-direction: row;

  .left, .right {
    text-align: center;
    white-space: pre-wrap;
    text-wrap-mode: nowrap;

    @media only screen and (min-width: 769px) {
      position: absolute;
      transform: translate(-50%, -50%);

    }
    @media only screen and (max-width: 768px) {
      width: 50%;

    }
  }
}
</style>
